(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c266c"],{"49c4":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),l={class:"hstack mb-3"},r=Object(o["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),c=Object(o["createTextVNode"])(" Ajouter un nouveau "),s={class:"row"},a={class:"col-lg-12"},i={class:"card"},d={class:"card-body"},m=Object(o["createElementVNode"])("h4",{class:"card-title"},"Listes des personnels",-1),u=Object(o["createElementVNode"])("p",{class:"card-title-desc"},[Object(o["createTextVNode"])(" Le tableau ci-dessous présente la listes des "),Object(o["createElementVNode"])("code",null,"personnels"),Object(o["createTextVNode"])(". ")],-1),p={class:"table-responsive"},b={class:"table align-middle mb-0"},O=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Nom"),Object(o["createElementVNode"])("th",null,"Prénom"),Object(o["createElementVNode"])("th",null,"Sexe"),Object(o["createElementVNode"])("th",null,"Email"),Object(o["createElementVNode"])("th",null,"Téléphone"),Object(o["createElementVNode"])("th",{class:"text-center"},"Action")])],-1),j={scope:"row"},h={class:"hstack"},f=Object(o["createElementVNode"])("i",{class:"bx bx-bullseye font-size-16 align-middle mx-1"},null,-1),v=Object(o["createElementVNode"])("i",{class:"bx bx-edit font-size-16 align-middle mx-1"},null,-1),V={class:"row"},E={class:"col-md-6 mb-3"},N={key:0,class:"text-danger mt-2"},x={class:"col-md-6 mb-3"},g={key:0,class:"text-danger mt-2"},k={class:"col-md-6 mb-3"},y=Object(o["createElementVNode"])("option",{value:""},"Selectionner le Sexe",-1),D=Object(o["createElementVNode"])("option",{value:"Masculin"},"Masculin",-1),B=Object(o["createElementVNode"])("option",{value:"Féminin"},"Féminin",-1),w=[y,D,B],C={key:0,class:"text-danger mt-2"},S={class:"col-md-6"},T={key:0,class:"text-danger mt-2"},M={class:"col-md-6"},q={key:0,class:"text-danger mt-2"},L={key:0,class:"mt-3"},P=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),U=[P],A={key:1,class:"mt-3 text-center"},F=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),_=[F],z={class:"row"},I={class:"col-md-6 mb-3"},H={key:0,class:"text-danger mt-2"},J={class:"col-md-6 mb-3"},G={key:0,class:"text-danger mt-2"},K={class:"col-md-6 mb-3"},Q=Object(o["createElementVNode"])("option",{value:""},"Selectionner le Sexe",-1),R=Object(o["createElementVNode"])("option",{value:"Masculin"},"Masculin",-1),W=Object(o["createElementVNode"])("option",{value:"Féminin"},"Féminin",-1),X=[Q,R,W],Y={key:0,class:"text-danger mt-2"},Z={class:"col-md-6"},$={key:0,class:"text-danger mt-2"},ee={class:"col-md-6"},te={key:0,class:"text-danger mt-2"},ne={key:0,class:"mt-3"},oe=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),le=[oe],re={key:1,class:"mt-3 text-center"},ce=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),se=[ce];function ae(e,t,n,y,D,B){var P=Object(o["resolveComponent"])("PageHeader"),F=Object(o["resolveComponent"])("b-button"),Q=Object(o["resolveComponent"])("router-link"),R=Object(o["resolveComponent"])("b-modal"),W=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(W,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(P,{title:D.title,items:D.items},null,8,["title","items"]),Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(F,{variant:"primary",onClick:t[0]||(t[0]=function(e){return y.doesAddOpen=!0}),class:"ms-auto"},{default:Object(o["withCtx"])((function(){return[r,c]})),_:1})]),Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",d,[m,u,Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("table",b,[O,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(D.users,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("th",j,Object(o["toDisplayString"])(t+1),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.lastname),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.firstname),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sex),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.email),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.phone),1),Object(o["createElementVNode"])("td",h,[Object(o["createVNode"])(Q,{to:"/cdn/users/"+e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(F,{class:"btn-sm",variant:"info"},{default:Object(o["withCtx"])((function(){return[f]})),_:1})]})),_:2},1032,["to"]),Object(o["createVNode"])(F,{class:"btn-sm ms-2",onClick:function(t){return B.initItem(e)},variant:"success"},{default:Object(o["withCtx"])((function(){return[v]})),_:2},1032,["onClick"])])])})),128))])])])])])])]),Object(o["createVNode"])(R,{modelValue:y.doesAddOpen,"onUpdate:modelValue":t[7]||(t[7]=function(e){return y.doesAddOpen=e}),id:"modal-center",centered:"",size:"lg",title:"Ajouter un personnel","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[6]||(t[6]=Object(o["withModifiers"])((function(e){return B.addItem()}),["prevent"]))},[Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("div",E,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"Nom de Famille",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return D.lastname=e}),class:"form-control"},null,512),[[o["vModelText"],D.lastname]]),D.errors.lastname?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",N,Object(o["toDisplayString"])(D.errors.lastname),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",x,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",required:"",placeholder:"Prénom(s)","onUpdate:modelValue":t[2]||(t[2]=function(e){return D.firstname=e}),class:"form-control"},null,512),[[o["vModelText"],D.firstname]]),D.errors.firstname?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",g,Object(o["toDisplayString"])(D.errors.firstname),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",k,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return D.sex=e}),required:"",class:"form-control"},w,512),[[o["vModelSelect"],D.sex]]),D.errors.firstname?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",C,Object(o["toDisplayString"])(D.errors.firstname),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",S,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"email",required:"",placeholder:"Email","onUpdate:modelValue":t[4]||(t[4]=function(e){return D.email=e}),class:"form-control"},null,512),[[o["vModelText"],D.email]]),D.errors.email?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",T,Object(o["toDisplayString"])(D.errors.email),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",M,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"tel",required:"",placeholder:"Téléphone","onUpdate:modelValue":t[5]||(t[5]=function(e){return D.phone=e}),class:"form-control"},null,512),[[o["vModelText"],D.phone]]),D.errors.phone?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",q,Object(o["toDisplayString"])(D.errors.phone),1)):Object(o["createCommentVNode"])("",!0)])]),D.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",A,_)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",L,U))],32)]})),_:1},8,["modelValue"]),Object(o["createVNode"])(R,{modelValue:y.doesEditOpen,"onUpdate:modelValue":t[14]||(t[14]=function(e){return y.doesEditOpen=e}),id:"modal-center",centered:"",size:"lg",title:"Modifier le personnel","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[13]||(t[13]=Object(o["withModifiers"])((function(e){return B.editItem()}),["prevent"]))},[Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("div",I,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"Nom de Famille",required:"","onUpdate:modelValue":t[8]||(t[8]=function(e){return D.lastname=e}),class:"form-control"},null,512),[[o["vModelText"],D.lastname]]),D.errors.lastname?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",H,Object(o["toDisplayString"])(D.errors.lastname),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",J,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",required:"",placeholder:"Prénom(s)","onUpdate:modelValue":t[9]||(t[9]=function(e){return D.firstname=e}),class:"form-control"},null,512),[[o["vModelText"],D.firstname]]),D.errors.firstname?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",G,Object(o["toDisplayString"])(D.errors.firstname),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",K,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[10]||(t[10]=function(e){return D.sex=e}),required:"",class:"form-control"},X,512),[[o["vModelSelect"],D.sex]]),D.errors.firstname?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Y,Object(o["toDisplayString"])(D.errors.firstname),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",Z,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"email",required:"",placeholder:"Email","onUpdate:modelValue":t[11]||(t[11]=function(e){return D.email=e}),class:"form-control"},null,512),[[o["vModelText"],D.email]]),D.errors.email?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",$,Object(o["toDisplayString"])(D.errors.email),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",ee,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"tel",required:"",placeholder:"Téléphone","onUpdate:modelValue":t[12]||(t[12]=function(e){return D.phone=e}),class:"form-control"},null,512),[[o["vModelText"],D.phone]]),D.errors.phone?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",te,Object(o["toDisplayString"])(D.errors.phone),1)):Object(o["createCommentVNode"])("",!0)])]),D.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",re,se)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ne,le))],32)]})),_:1},8,["modelValue"])]})),_:1})}n("a4d3"),n("e01a"),n("d3b7"),n("b0c0"),n("d81d"),n("4de4");var ie=n("3d20"),de=n.n(ie),me=n("444f"),ue=n("c2a4"),pe=n("2579"),be=n("e01f"),Oe={setup:function(){var e=Object(o["ref"])(!1),t=Object(o["ref"])(!1),n=Object(o["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:n}},page:{title:"Categories",meta:[{name:"description",content:ue.description}]},components:{Layout:me["a"],PageHeader:pe["a"]},data:function(){return{title:"Personnels",items:[{text:"Définition"},{text:"Personnels",active:!0}],errors:[],user:{},users:[],lastname:"",firstname:"",email:"",sex:"",phone:"",loading:!1,status:201}},methods:{loadList:function(){var e=this;fetch(be["a"].route("users"),be["a"].requestOptions()).then((function(e){return be["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.users=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("lastname",this.lastname),t.append("firstname",this.firstname),t.append("sex",this.sex),t.append("email",this.email),t.append("phone",this.phone),fetch(be["a"].route("users"),be["a"].requestOptions("POST",t)).then((function(t){return be["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){var n,o,l;(console.log(e.status),console.log(t),e.loading=!1,201==e.status)?(e.name="",e.doesAddOpen=!1,e.users.push(t.data),de.a.fire("Personnel ajouter !","Le personnel a été enregistré avec succès.","success")):(e.errors.email=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.email[0],e.errors.sex=null===(o=t.data)||void 0===o?void 0:o.sex[0],e.errors.phone=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.phone[0])})).catch((function(t){console.log(t),e.loading=!1}))},editItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("lastname",this.lastname),t.append("firstname",this.firstname),t.append("sex",this.sex),t.append("email",this.email),t.append("phone",this.phone),t.append("_method","PUT"),console.log(t.get("name"),"id",this.user.id),fetch(be["a"].route("users/"+this.user.id),be["a"].requestOptions("POST",t)).then((function(t){return be["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){var n,o,l,r,c;(console.log(e.status),console.log("last",e.user),console.log("new",t.data),e.loading=!1,200==e.status)?(e.name="",e.doesEditOpen=!1,e.users=e.users.map((function(n){return n.id!==e.user.id?n:t.data})),de.a.fire("Personnel modifier !","Le personnel a été modifié avec succès.","success")):(e.errors.lastname=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.lastname[0],e.errors.firstname=null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.firstname[0],e.errors.email=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.email[0],e.errors.sex=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.sex[0],e.errors.phone=null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.phone[0])})).catch((function(t){console.log(t),e.loading=!1}))},deleteIt:function(){var e=this;this.loading=!0,fetch(be["a"].route("users/"+this.user.id),be["a"].requestOptions("DELETE")).then((function(t){return be["a"].tokenChecker(t.status),e.status=t.status,t.text()})).then((function(t){console.log(e.status),console.log(t),204==e.status?(e.users=e.users.filter((function(t){return t.id!==e.user.id})),e.name="",e.loading=!1,e.user=null,e.doesDeleteOpen=!1,de.a.fire("Personnel supprimer !","Le personnel a été supprimé avec succès.","success")):de.a.fire("Personnel non supprimer ?","La suppression n'a pas marché, veuillez réessayez plus tard.","error")}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.user=e,console.log("init",this.user),this.lastname=e.lastname,this.firstname=e.firstname,this.email=e.email,this.phone=e.phone,this.sex=e.sex,"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0}},mounted:function(){this.loadList()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.lastname="",this.firstname="",this.email="",this.phone="",this.sex="",this.user=null)},doesDeleteOpen:function(){this.doesDeleteOpen||(this.lastname="",this.firstname="",this.email="",this.phone="",this.sex="",this.user=null)}}},je=n("6b0d"),he=n.n(je);const fe=he()(Oe,[["render",ae]]);t["default"]=fe}}]);
//# sourceMappingURL=chunk-2d0c266c.76b716b1.js.map