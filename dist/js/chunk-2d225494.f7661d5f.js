(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225494"],{e46e:function(e,t,n){"use strict";n.r(t);n("b0c0");var l=n("7a23"),c={class:"hstack mb-3"},a=Object(l["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),r=Object(l["createTextVNode"])(" Ajouter un nouveau "),o={class:"row"},i={class:"col-lg-12"},s={class:"card"},d={class:"card-body"},u=Object(l["createElementVNode"])("h4",{class:"card-title"},"Listes des albums",-1),m=Object(l["createElementVNode"])("p",{class:"card-title-desc"},[Object(l["createTextVNode"])(" Le tableau ci-dessous présente la listes des "),Object(l["createElementVNode"])("code",null,"albums"),Object(l["createTextVNode"])(". ")],-1),b={class:"table-responsive"},p={class:"table align-middle mb-0"},O=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",null,"#"),Object(l["createElementVNode"])("th",null,"Nom de l'album"),Object(l["createElementVNode"])("th",null,"Est public"),Object(l["createElementVNode"])("th",null,"Action")])],-1),j={scope:"row"},f={class:"hstack"},g=Object(l["createElementVNode"])("i",{class:"bx bx-edit font-size-16 align-middle mx-1"},null,-1),E={class:"row"},V={class:"mb-3"},h=Object(l["createElementVNode"])("label",{for:""},"Nom de l'album",-1),N={key:0,class:"text-danger mt-2"},y=Object(l["createElementVNode"])("label",{for:""},"Album (Image principale)",-1),v=Object(l["createElementVNode"])("input",{type:"file",required:"",accept:".png, .jpg, .jpeg",id:"file",class:"form-control"},null,-1),k={key:0,class:"text-danger mt-2"},x={key:0,class:"mt-3"},B=Object(l["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),_=[B],D={key:1,class:"mt-3 text-center"},C=Object(l["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(l["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),w=[C],S={class:"row"},A={class:"mb-3"},L=Object(l["createElementVNode"])("label",{for:""},"Nom de l'album ",-1),I={key:0,class:"text-danger mt-2"},T={class:"mb-3"},q=Object(l["createElementVNode"])("label",{for:""},"Album (Image principale, Facultatif)",-1),M=Object(l["createElementVNode"])("input",{type:"file",accept:".png, .jpg, .jpeg",id:"file1",class:"form-control"},null,-1),P={key:0,class:"text-danger mt-2"},U=Object(l["createElementVNode"])("label",{for:""},"Statut",-1),z=Object(l["createElementVNode"])("option",{value:"1"},"Public",-1),F=Object(l["createElementVNode"])("option",{value:"0"},"Privée",-1),G=[z,F],H={key:0,class:"text-danger mt-2"},J={key:0,class:"mt-3"},K=Object(l["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),Q=[K],R={key:1,class:"mt-3 text-center"},W=Object(l["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(l["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),X=[W],Y={class:"mb-2"},Z=Object(l["createTextVNode"])(" Voulez-vous vraiment supprimer l'album "),$=Object(l["createElementVNode"])("p",{class:"text-danger"},"Attention ! Supprimer un album implique la suppression de toutes ses photos et vidéos.",-1),ee={key:0,class:"hstack mt-2"},te={key:1,class:"text-center"},ne=Object(l["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(l["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),le=[ne];function ce(e,t,n,B,C,z){var F=Object(l["resolveComponent"])("PageHeader"),K=Object(l["resolveComponent"])("b-button"),W=Object(l["resolveComponent"])("router-link"),ne=Object(l["resolveComponent"])("b-modal"),ce=Object(l["resolveComponent"])("Layout");return Object(l["openBlock"])(),Object(l["createBlock"])(ce,null,{default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(F,{title:C.title,items:C.items},null,8,["title","items"]),Object(l["createElementVNode"])("div",c,[Object(l["createVNode"])(K,{variant:"primary",onClick:t[0]||(t[0]=function(e){return B.doesAddOpen=!0}),class:"ms-auto"},{default:Object(l["withCtx"])((function(){return[a,r]})),_:1})]),Object(l["createElementVNode"])("div",o,[Object(l["createElementVNode"])("div",i,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("div",d,[u,m,Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("table",p,[O,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(C.gallerys,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:e.id},[Object(l["createElementVNode"])("th",j,Object(l["toDisplayString"])(t+1),1),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(W,{to:"/cdn/gallery/"+e.id},{default:Object(l["withCtx"])((function(){return[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.is_public?"Oui":"Non"),1),Object(l["createElementVNode"])("td",f,[Object(l["createVNode"])(K,{class:"btn-sm",onClick:function(t){return z.initItem(e)},variant:"success"},{default:Object(l["withCtx"])((function(){return[g]})),_:2},1032,["onClick"])])])})),128))])])])])])])]),Object(l["createVNode"])(ne,{modelValue:B.doesAddOpen,"onUpdate:modelValue":t[3]||(t[3]=function(e){return B.doesAddOpen=e}),id:"modal-center",centered:"",title:"Ajouter un album","title-class":"font-18","hide-footer":""},{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(l["withModifiers"])((function(e){return z.addItem()}),["prevent"]))},[Object(l["createElementVNode"])("div",E,[Object(l["createElementVNode"])("div",V,[h,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return C.name=e}),class:"form-control"},null,512),[[l["vModelText"],C.name]]),C.errors.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",N,Object(l["toDisplayString"])(C.errors.name),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",null,[y,v,C.errors.file?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",k,Object(l["toDisplayString"])(C.errors.file),1)):Object(l["createCommentVNode"])("",!0)])]),C.loading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",D,w)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",x,_))],32)]})),_:1},8,["modelValue"]),Object(l["createVNode"])(ne,{modelValue:B.doesEditOpen,"onUpdate:modelValue":t[7]||(t[7]=function(e){return B.doesEditOpen=e}),id:"modal-center",centered:"",title:"Modifier l'album","title-class":"font-18","hide-footer":""},{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("form",{onSubmit:t[6]||(t[6]=Object(l["withModifiers"])((function(e){return z.editItem()}),["prevent"]))},[Object(l["createElementVNode"])("div",S,[C.entity_id_==C.entity_id?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("div",A,[L,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[4]||(t[4]=function(e){return C.name=e}),class:"form-control"},null,512),[[l["vModelText"],C.name]]),C.errors.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",I,Object(l["toDisplayString"])(C.errors.name),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",T,[q,M,C.errors.file?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",P,Object(l["toDisplayString"])(C.errors.file),1)):Object(l["createCommentVNode"])("",!0)])],64)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",null,[U,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=function(e){return C.is_public=e})},G,512),[[l["vModelSelect"],C.is_public]]),C.errors.is_public?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",H,Object(l["toDisplayString"])(C.errors.is_public),1)):Object(l["createCommentVNode"])("",!0)])]),C.loading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",R,X)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",J,Q))],32)]})),_:1},8,["modelValue"]),Object(l["createVNode"])(ne,{modelValue:B.doesDeleteOpen,"onUpdate:modelValue":t[10]||(t[10]=function(e){return B.doesDeleteOpen=e}),id:"modal-center",title:"Supprimer l'album","title-class":"font-18","hide-footer":""},{default:Object(l["withCtx"])((function(){var e;return[Object(l["createElementVNode"])("p",Y,[Z,Object(l["createElementVNode"])("b",null,Object(l["toDisplayString"])(null===(e=C.gallery)||void 0===e?void 0:e.name),1)]),$,C.loading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",te,le)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ee,[Object(l["createElementVNode"])("button",{class:"btn btn-dark ms-auto",onClick:t[8]||(t[8]=function(e){return B.doesDeleteOpen=!1})},"Annuler"),Object(l["createElementVNode"])("button",{class:"ms-3 btn btn-danger",onClick:t[9]||(t[9]=function(e){return z.deleteIt()})},"Supprimer")]))]})),_:1},8,["modelValue"])]})),_:1})}n("a4d3"),n("e01a"),n("d3b7"),n("d81d"),n("4de4");var ae=n("3d20"),re=n.n(ae),oe=n("444f"),ie=n("c2a4"),se=n("2579"),de=n("e01f"),ue={setup:function(){var e=Object(l["ref"])(!1),t=Object(l["ref"])(!1),n=Object(l["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:n}},page:{title:"Galerie",meta:[{name:"description",content:ie.description}]},components:{Layout:oe["a"],PageHeader:se["a"]},data:function(){return{title:"Galerie",items:[{text:"Menu",href:"/"},{text:"Galerie",active:!0}],errors:[],gallery:null,gallerys:[],name:"",entity_id_:"",entity_id:localStorage.getItem("entity_id"),is_public:!1,loading:!1,status:201}},methods:{loadList:function(){var e=this;fetch(de["a"].route("gallerys"),de["a"].requestOptions()).then((function(e){return de["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.gallerys=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("name",this.name),t.append("file",document.getElementById("file").files[0]),fetch(de["a"].route("gallerys"),de["a"].requestOptions("POST",t)).then((function(t){return de["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.doesAddOpen=!1,e.initData(null),e.gallerys.push(t.data),re.a.fire("Album ajouter !","L'album a été enregistré avec succès.","success")):(e.errors.name=de["a"].getError(t.data,"name"),e.errors.is_public=de["a"].getError(t.data,"is_public"),e.errors.file=de["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},editItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("_method","PUT"),t.append("name",this.name),t.append("is_public",this.is_public),void 0!=document.getElementById("file1")&&t.append("file",document.getElementById("file1").files[0]),fetch(de["a"].route("gallerys/"+this.gallery.id),de["a"].requestOptions("POST",t)).then((function(t){return de["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){e.loading=!1,200==e.status?(e.name="",e.doesEditOpen=!1,e.gallerys=e.gallerys.map((function(n){return n.id!==e.gallery.id?n:t.data})),re.a.fire("Album modifier !","L'album a été modifié avec succès.","success")):(e.errors.name=de["a"].getError(t.data,"name"),e.errors.is_public=de["a"].getError(t.data,"is_public"),e.errors.file=de["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},deleteIt:function(){var e=this;this.loading=!0,fetch(de["a"].route("gallerys/"+this.gallery.id),de["a"].requestOptions("DELETE")).then((function(t){return de["a"].tokenChecker(t.status),e.status=t.status,t.text()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,e.doesDeleteOpen=!1,204==e.status?(e.gallerys=e.gallerys.filter((function(t){return t.id!==e.gallery.id})),re.a.fire("Album supprimer !","L'album a été supprimé avec succès.","success")):re.a.fire("Album non supprimer ?","La suppression n'a pas marché, veuillez réssayez plus tard.","error")}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.gallery=e,this.initData(e),"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0},initData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.name=null!=e?e.name:"",this.is_public=null!=e?e.is_public:"",this.entity_id_=null!=e?e.entity_id:""}},mounted:function(){this.loadList()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.gallery=null,this.initData(null))},doesDeleteOpen:function(){this.doesDeleteOpen||(this.gallery=null,this.initData(null))}}},me=n("6b0d"),be=n.n(me);const pe=be()(ue,[["render",ce]]);t["default"]=pe}}]);
//# sourceMappingURL=chunk-2d225494.f7661d5f.js.map