{"version":3,"sources":["webpack:///./src/router/views/pages/cdn/sub-activities/show.vue","webpack:///./src/router/views/pages/cdn/sub-activities/show.vue?459f"],"names":["class","role","for","type","value","title","items","sub_activity","approved","report","loadingSetStatut","variant","doesAddOpen","setStatus","id","name","file","href","STORAGE_URL","target","amount","date_start","date_end","description","date_report","message","date_approved","centered","title-class","hide-footer","rows","loading","setup","page","meta","content","components","Layout","PageHeader","data","text","active","errors","status","methods","getItem","fetch","route","this","requestOptions","then","response","tokenChecker","json","console","log","formData","FormData","append","fire","catch","error","mounted","$route","params","__exports__","render"],"mappings":"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","file":"js/chunk-2d2167a6.b5e6dd7e.js","sourcesContent":["<script>\r\nimport Swal from 'sweetalert2'\r\n\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\n\r\nimport { ref } from \"vue\";\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n  setup() {\r\n        const doesAddOpen = ref(false);\r\n\r\n        return {\r\n            doesAddOpen,\r\n        };\r\n    },\r\n    page: {\r\n    title: \"Categories\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Projet\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Projet\",\r\n          active: true,\r\n        },\r\n        {\r\n          text: \"Un projet\",\r\n          active: true,\r\n        },\r\n      ],\r\n      errors: [],\r\n      id: \"\",\r\n      loading: false,\r\n      loadingSetStatut: false,\r\n      message: \"\",\r\n      sub_activity: {},\r\n      status: 201,\r\n      STORAGE_URL: Helper.STORAGE_URL,\r\n    };\r\n  },\r\n  methods: {\r\n    getItem() {\r\n      fetch(Helper.route('sub-activities/'+this.id), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(data.data);\r\n        this.sub_activity = data.data\r\n      })\r\n    },\r\n    setStatus(approved) {\r\n      if (approved == -1) {\r\n        this.loading = true\r\n      } else {\r\n        this.loadingSetStatut = true\r\n        this.message = \"\"\r\n      }\r\n      this.errors = []\r\n      let formData = new FormData()\r\n      formData.append('approved', approved)\r\n      formData.append('message', this.message)\r\n      fetch(Helper.route('sub-activities/'+this.id+'/status'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.message = \"\"\r\n        this.doesAddOpen = false\r\n        if (approved == 0) {\r\n          this.loading = false\r\n        } else {\r\n          this.loadingSetStatut = false\r\n        }\r\n        if (this.status == 200) {\r\n          this.sub_activity = data.data\r\n          Swal.fire(\"Rapport envoyé !\", \"Le rapport a été envoyé avec succès.\", \"success\");\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        if (approved == 0) {\r\n          this.loading = false\r\n        } else {\r\n          this.loadingSetStatut = false\r\n        }\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id\r\n    this.getItem()\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n\r\n    <div class=\"hstack mb-3\" v-if=\"sub_activity.approved == 0 && sub_activity.report\">\r\n        <div class=\"ms-auto\">\r\n          <div class=\"hstack\" v-if=\"!loadingSetStatut\">\r\n            <b-button variant=\"danger\" @click=\"doesAddOpen = true\">\r\n                <i class=\"bx bx-window-close font-size-16 align-middle me-2\"></i>\r\n                Refuser le rapport\r\n            </b-button>\r\n            <b-button variant=\"success\" class=\"ms-3\" @click=\"setStatus(1)\">\r\n                <i class=\"bx bx-check-double font-size-16 align-middle me-2\"></i>\r\n                Accepter le rapport\r\n            </b-button>  \r\n          </div>\r\n          <div class=\"text-center\" v-else>\r\n              <div class=\"spinner-border text-primary\" role=\"status\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    \r\n    <div class=\"row\" v-if=\"sub_activity.id\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title text-primary mb-3\">{{ sub_activity.name }}</h4>\r\n            <p><b>Fichier du projet</b> : \r\n                <a :href=\"STORAGE_URL+sub_activity.file\" v-if=\"sub_activity.file\" target=\"_blank\" class=\"btn btn-sm btn-success rounded-pill\">\r\n                    <i class=\"bx bx-download font-size-14 align-middle mx-1 text-white\"></i>\r\n                    Télécharger le Fichier\r\n                </a>\r\n            </p>\r\n            <p><b>Montant alloué</b> : {{ sub_activity.amount }} F CFA</p>\r\n            <p><b>Date debut</b> : {{ sub_activity.date_start }}</p>\r\n            <p><b>Date Fin</b> : {{ sub_activity.date_end }}</p>\r\n            <h6><b>Description</b></h6>\r\n            <p class=\"card-title-desc\">\r\n              {{ sub_activity.description }}\r\n            </p>\r\n\r\n            <div class=\"bg-light p-2 mt-3 mb-0 pt-3\" v-if=\"sub_activity.report\">\r\n                <p><b>Rapport</b> : <br>\r\n                    <a :href=\"STORAGE_URL+sub_activity.report\" target=\"_blank\" class=\"btn btn-sm btn-success rounded-pill\">\r\n                        <i class=\"bx bx-download font-size-14 align-middle mx-1 text-white\"></i>\r\n                        Télécharger le Fichier\r\n                    </a>\r\n                </p>\r\n                <p><b>Date d'envoie</b> : <br> {{ sub_activity.date_report }}</p>\r\n            </div>\r\n            \r\n\r\n            <div class=\"bg-light border shadow p-2 mt-3 mb-0 pt-3\" v-if=\"sub_activity.approved == -1\">\r\n              <p><b>Statut du rapport</b> : <br><span class=\"text-danger\">Réjété</span></p>\r\n              <p><b>Message de rejet</b> : <br>{{ sub_activity.message }} </p>\r\n            </div>\r\n            \r\n\r\n            <div class=\"bg-light border shadow p-2 mt-3 mb-0 pt-3\" v-if=\"sub_activity.approved == 1\">\r\n              <p><b>Statut du rapport</b> : <br><span class=\"text-success\">Accepté</span></p>\r\n              <p><b>Date d'approbation</b> : <br>{{ sub_activity.date_approved }} </p>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n    <!-- ADD MODAL -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen\"\r\n        id=\"modal-center\"\r\n        centered\r\n        title=\"Refuser le rapport\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <form @submit.prevent=\"setStatus(-1)\">\r\n            <div class=\"mb-3\">\r\n                <label for=\"\">Message de rejet</label>\r\n                <textarea v-model=\"message\" class=\"form-control\" rows=\"3\"></textarea>\r\n            </div>\r\n            <div class=\"mt-3\" v-if=\"!loading\">\r\n                <input type=\"submit\" value=\"Envoyer\" class=\"btn btn-primary\">\r\n            </div>\r\n            <div class=\"mt-3 text-center\" v-else>\r\n                <div class=\"spinner-border text-primary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./show.vue?vue&type=template&id=64448915\"\nimport script from \"./show.vue?vue&type=script&lang=js\"\nexport * from \"./show.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}