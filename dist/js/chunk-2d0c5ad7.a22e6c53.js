(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5ad7"],{"3fb0":function(e,t,n){"use strict";n.r(t);n("b0c0"),n("a4d3"),n("e01a");var o=n("7a23"),r={key:0,class:"hstack mb-3"},c=Object(o["createElementVNode"])("i",{class:"bx bx-send font-size-16 align-middle me-2"},null,-1),l=Object(o["createTextVNode"])(" Envoyer vos réponses "),a={key:1,class:"row"},s={class:"col-lg-12"},i={class:"card"},d={class:"card-body"},u={class:"card-title"},m={class:"text-danger mb-2"},b={class:"card-title-desc"},O={key:0,class:"bg-light p-3 pt-3"},p=Object(o["createElementVNode"])("h6",{class:"font-20 text-danger"},"♣ Listes des questions",-1),j={class:"table-responsive"},f={class:"table align-middle mb-0"},E=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Question")])],-1),h={scope:"row"},g={key:1,class:"bg-light p-3 pt-3"},V=Object(o["createElementVNode"])("h6",{class:"font-20 text-danger"},"♣ Vos réponses",-1),k={class:"table-responsive"},v={class:"table align-middle mb-0"},N=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Question"),Object(o["createElementVNode"])("th",null,"Réponse")])],-1),y={scope:"row"},B=["for"],z=["id"],q={key:0,class:""},_=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),x=[_],w={key:1,class:"text-center"},C=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),S=[C];function D(e,t,n,_,C,D){var F=Object(o["resolveComponent"])("PageHeader"),L=Object(o["resolveComponent"])("b-button"),R=Object(o["resolveComponent"])("b-modal"),A=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(A,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(F,{title:C.title,items:C.items},null,8,["title","items"]),!C.formular_responses.length>0&&C.formular.can_submit?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(L,{variant:"success",onClick:t[0]||(t[0]=function(e){return _.doesAddOpen=!0}),class:"ms-auto"},{default:Object(o["withCtx"])((function(){return[c,l]})),_:1})])):Object(o["createCommentVNode"])("",!0),C.formular!={}?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("h4",u,Object(o["toDisplayString"])(C.formular.name),1),Object(o["createElementVNode"])("p",m," Date de Fin : "+Object(o["toDisplayString"])(C.formular.date),1),Object(o["createElementVNode"])("p",b,Object(o["toDisplayString"])(C.formular.description),1),0==C.formular_responses.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,[p,Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("table",f,[E,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(C.formular.formular_quizzes,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("th",h,Object(o["toDisplayString"])(t+1),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.quiz),1)])})),128))])])])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[V,Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("table",v,[N,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(C.formular_responses,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("th",y,Object(o["toDisplayString"])(t+1),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.formular_quiz.quiz),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.response),1)])})),128))])])])]))])])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(R,{modelValue:_.doesAddOpen,"onUpdate:modelValue":t[2]||(t[2]=function(e){return _.doesAddOpen=e}),id:"modal-center",centered:"",size:"lg",scrollable:"",title:"Envoyez votre réponse","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return D.sendResponse()}),["prevent"]))},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(C.formular.formular_quizzes,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"mb-3",key:e.id},[Object(o["createElementVNode"])("label",{for:"quiz"+e.id},Object(o["toDisplayString"])(t+1+" - "+e.quiz),9,B),Object(o["createElementVNode"])("input",{type:"text",required:"",id:"quiz"+e.id,class:"form-control"},null,8,z)])})),128)),C.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",w,S)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",q,x))],32)]})),_:1},8,["modelValue"])]})),_:1})}n("d3b7"),n("e9c4");var F=n("3d20"),L=n.n(F),R=n("444f"),A=n("c2a4"),I=n("2579"),J=n("e01f"),P={setup:function(){var e=Object(o["ref"])(!1);return{doesAddOpen:e}},page:{title:"Evènement",meta:[{name:"description",content:A.description}]},components:{Layout:R["a"],PageHeader:I["a"]},data:function(){return{title:"Formulaire",items:[{text:"Menu",href:"/"},{text:"Formulaire",active:!0},{text:"Un formulaire",active:!0}],id:"",quiz:"",errors:[],responses:{},formular:{},formular_quiz:{},formular_responses:[],loading:!1,status:201}},methods:{getItem:function(){var e=this;fetch(J["a"].route("general/formulars/"+this.id),J["a"].requestOptions()).then((function(e){return J["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log("formulars",t.data),e.formular=t.data.formular,e.formular_responses=t.data.formular_responses}))},getResponses:function(){for(var e=0;e<this.formular.formular_quizzes.length;e++){var t=this.formular.formular_quizzes[e],n=document.getElementById("quiz"+t["id"]).value,o="quiz"+t["id"];this.responses[o]=n}},sendResponse:function(){var e=this;this.loading=!0,this.errors=[],this.getResponses();var t=new FormData;t.append("responses",JSON.stringify(this.responses)),t.append("formular_id",this.id),fetch(J["a"].route("general/formular-responses"),J["a"].requestOptions("POST",t)).then((function(t){return J["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.formular=t.data.formular,e.formular_responses=t.data.formular_responses,e.doesAddOpen=!1,L.a.fire("Réponse envoyé !","Vos réponses ont été envoyées avec succès.","success")):e.errors.quiz=J["a"].getError(t.data,"quiz")})).catch((function(t){console.log(t),e.loading=!1}))}},mounted:function(){this.id=this.$route.params.id,this.getItem()}},H=n("6b0d"),M=n.n(H);const Q=M()(P,[["render",D]]);t["default"]=Q}}]);
//# sourceMappingURL=chunk-2d0c5ad7.a22e6c53.js.map