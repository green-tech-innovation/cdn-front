(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cbec0"],{"4c72":function(e,t,n){"use strict";n.r(t);n("b0c0");var l=n("7a23"),a={class:"hstack mb-3"},c=Object(l["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),r=Object(l["createTextVNode"])(" Ajouter un nouveau "),o={class:"row"},s={class:"col-lg-12"},i={class:"card"},d={class:"card-body"},u=Object(l["createElementVNode"])("h4",{class:"card-title"},"Listes des albums",-1),m=Object(l["createElementVNode"])("p",{class:"card-title-desc"},[Object(l["createTextVNode"])(" Le tableau ci-dessous présente la listes des "),Object(l["createElementVNode"])("code",null,"albums"),Object(l["createTextVNode"])(". ")],-1),b={class:"table-responsive"},p={class:"table align-middle mb-0"},O=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",null,"#"),Object(l["createElementVNode"])("th",null,"Nom de l'album"),Object(l["createElementVNode"])("th",null,"Est public"),Object(l["createElementVNode"])("th",null,"Action")])],-1),j={scope:"row"},f={class:"hstack"},g=Object(l["createElementVNode"])("i",{class:"bx bx-edit font-size-16 align-middle mx-1"},null,-1),h=Object(l["createElementVNode"])("i",{class:"bx bx-trash font-size-16 align-middle mx-1"},null,-1),E={class:"row"},V={class:"mb-3"},N=Object(l["createElementVNode"])("label",{for:""},"Nom de l'album",-1),v={key:0,class:"text-danger mt-2"},y=Object(l["createElementVNode"])("label",{for:""},"Album (Image principale)",-1),k=Object(l["createElementVNode"])("input",{type:"file",required:"",accept:".png, .jpg, .jpeg",id:"file",class:"form-control"},null,-1),x={key:0,class:"text-danger mt-2"},B={key:0,class:"mt-3"},C=Object(l["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),w=[C],D={key:1,class:"mt-3 text-center"},_=Object(l["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(l["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),A=[_],L={class:"row"},S={class:"mb-3"},I=Object(l["createElementVNode"])("label",{for:""},"Nom de l'album",-1),T={key:0,class:"text-danger mt-2"},q={class:"mb-3"},z=Object(l["createElementVNode"])("label",{for:""},"Album (Image principale, Facultatif)",-1),M=Object(l["createElementVNode"])("input",{type:"file",accept:".png, .jpg, .jpeg",id:"file1",class:"form-control"},null,-1),U={key:0,class:"text-danger mt-2"},P={key:0,class:"mt-3"},F=Object(l["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),G=[F],H={key:1,class:"mt-3 text-center"},J=Object(l["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(l["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),K=[J],Q={class:"mb-2"},R=Object(l["createTextVNode"])(" Voulez-vous vraiment supprimer l'album "),W=Object(l["createElementVNode"])("p",{class:"text-danger"},"Attention ! Supprimer un album implique la suppression de toutes ses photos et vidéos.",-1),X={key:0,class:"hstack mt-2"},Y={key:1,class:"text-center"},Z=Object(l["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(l["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),$=[Z];function ee(e,t,n,C,_,F){var J=Object(l["resolveComponent"])("PageHeader"),Z=Object(l["resolveComponent"])("b-button"),ee=Object(l["resolveComponent"])("router-link"),te=Object(l["resolveComponent"])("b-modal"),ne=Object(l["resolveComponent"])("Layout");return Object(l["openBlock"])(),Object(l["createBlock"])(ne,null,{default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(J,{title:_.title,items:_.items},null,8,["title","items"]),Object(l["createElementVNode"])("div",a,[Object(l["createVNode"])(Z,{variant:"primary",onClick:t[0]||(t[0]=function(e){return C.doesAddOpen=!0}),class:"ms-auto"},{default:Object(l["withCtx"])((function(){return[c,r]})),_:1})]),Object(l["createElementVNode"])("div",o,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("div",i,[Object(l["createElementVNode"])("div",d,[u,m,Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("table",p,[O,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(_.gallerys,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:e.id},[Object(l["createElementVNode"])("th",j,Object(l["toDisplayString"])(t+1),1),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(ee,{to:"/sector/gallery/"+e.id},{default:Object(l["withCtx"])((function(){return[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.is_public?"Oui":"Non"),1),Object(l["createElementVNode"])("td",f,[Object(l["createVNode"])(Z,{class:"btn-sm",onClick:function(t){return F.initItem(e)},variant:"success"},{default:Object(l["withCtx"])((function(){return[g]})),_:2},1032,["onClick"]),Object(l["createVNode"])(Z,{variant:"danger",onClick:function(t){return F.initItem(e,"delete")},class:"ms-2 btn-sm"},{default:Object(l["withCtx"])((function(){return[h]})),_:2},1032,["onClick"])])])})),128))])])])])])])]),Object(l["createVNode"])(te,{modelValue:C.doesAddOpen,"onUpdate:modelValue":t[3]||(t[3]=function(e){return C.doesAddOpen=e}),id:"modal-center",centered:"",title:"Ajouter un album","title-class":"font-18","hide-footer":""},{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(l["withModifiers"])((function(e){return F.addItem()}),["prevent"]))},[Object(l["createElementVNode"])("div",E,[Object(l["createElementVNode"])("div",V,[N,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return _.name=e}),class:"form-control"},null,512),[[l["vModelText"],_.name]]),_.errors.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",v,Object(l["toDisplayString"])(_.errors.name),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",null,[y,k,_.errors.file?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",x,Object(l["toDisplayString"])(_.errors.file),1)):Object(l["createCommentVNode"])("",!0)])]),_.loading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",D,A)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",B,w))],32)]})),_:1},8,["modelValue"]),Object(l["createVNode"])(te,{modelValue:C.doesEditOpen,"onUpdate:modelValue":t[6]||(t[6]=function(e){return C.doesEditOpen=e}),id:"modal-center",centered:"",title:"Modifier l'album","title-class":"font-18","hide-footer":""},{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("form",{onSubmit:t[5]||(t[5]=Object(l["withModifiers"])((function(e){return F.editItem()}),["prevent"]))},[Object(l["createElementVNode"])("div",L,[Object(l["createElementVNode"])("div",S,[I,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[4]||(t[4]=function(e){return _.name=e}),class:"form-control"},null,512),[[l["vModelText"],_.name]]),_.errors.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",T,Object(l["toDisplayString"])(_.errors.name),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",q,[z,M,_.errors.file?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",U,Object(l["toDisplayString"])(_.errors.file),1)):Object(l["createCommentVNode"])("",!0)])]),_.loading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",H,K)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",P,G))],32)]})),_:1},8,["modelValue"]),Object(l["createVNode"])(te,{modelValue:C.doesDeleteOpen,"onUpdate:modelValue":t[9]||(t[9]=function(e){return C.doesDeleteOpen=e}),id:"modal-center",title:"Supprimer l'album","title-class":"font-18","hide-footer":""},{default:Object(l["withCtx"])((function(){var e;return[Object(l["createElementVNode"])("p",Q,[R,Object(l["createElementVNode"])("b",null,Object(l["toDisplayString"])(null===(e=_.gallery)||void 0===e?void 0:e.name),1)]),W,_.loading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Y,$)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",X,[Object(l["createElementVNode"])("button",{class:"btn btn-dark ms-auto",onClick:t[7]||(t[7]=function(e){return C.doesDeleteOpen=!1})},"Annuler"),Object(l["createElementVNode"])("button",{class:"ms-3 btn btn-danger",onClick:t[8]||(t[8]=function(e){return F.deleteIt()})},"Supprimer")]))]})),_:1},8,["modelValue"])]})),_:1})}n("a4d3"),n("e01a"),n("d3b7"),n("d81d"),n("4de4");var te=n("3d20"),ne=n.n(te),le=n("444f"),ae=n("c2a4"),ce=n("2579"),re=n("e01f"),oe={setup:function(){var e=Object(l["ref"])(!1),t=Object(l["ref"])(!1),n=Object(l["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:n}},page:{title:"Galerie",meta:[{name:"description",content:ae.description}]},components:{Layout:le["a"],PageHeader:ce["a"]},data:function(){return{title:"Galerie",items:[{text:"Menu",href:"/"},{text:"Galerie",active:!0}],errors:[],gallery:null,gallerys:[],name:"",is_public:!1,loading:!1,status:201}},methods:{loadList:function(){var e=this;fetch(re["a"].route("sector/gallerys"),re["a"].requestOptions()).then((function(e){return re["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.gallerys=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("name",this.name),t.append("file",document.getElementById("file").files[0]),fetch(re["a"].route("gallerys"),re["a"].requestOptions("POST",t)).then((function(t){return re["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.doesAddOpen=!1,e.initData(null),e.gallerys.push(t.data),ne.a.fire("Album ajouter !","L'album a été enregistré avec succès.","success")):(e.errors.name=re["a"].getError(t.data,"name"),e.errors.is_public=re["a"].getError(t.data,"is_public"),e.errors.file=re["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},editItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("_method","PUT"),t.append("name",this.name),t.append("is_public",this.is_public),t.append("file",document.getElementById("file1").files[0]),console.log(t.get("name"),"id",this.gallery.id),fetch(re["a"].route("gallerys/"+this.gallery.id),re["a"].requestOptions("POST",t)).then((function(t){return re["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log("last",e.gallery),console.log("new",t.data),e.loading=!1,200==e.status?(e.name="",e.doesEditOpen=!1,e.gallerys=e.gallerys.map((function(n){return n.id!==e.gallery.id?n:t.data})),ne.a.fire("Album modifier !","L'album a été modifié avec succès.","success")):(e.errors.name=re["a"].getError(t.data,"name"),e.errors.is_public=re["a"].getError(t.data,"is_public"),e.errors.file=re["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},deleteIt:function(){var e=this;this.loading=!0,fetch(re["a"].route("gallerys/"+this.gallery.id),re["a"].requestOptions("DELETE")).then((function(t){return re["a"].tokenChecker(t.status),e.status=t.status,t.text()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,e.doesDeleteOpen=!1,204==e.status?(e.gallerys=e.gallerys.filter((function(t){return t.id!==e.gallery.id})),ne.a.fire("Album supprimer !","L'album a été supprimé avec succès.","success")):ne.a.fire("Album non supprimer ?","La suppression n'a pas marché, veuillez réssayez plus tard.","error")}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.gallery=e,this.initData(e),"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0},initData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.name=null!=e?e.name:"",this.is_public=null!=e?e.is_public:""}},mounted:function(){this.loadList()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.gallery=null,this.initData(null))},doesDeleteOpen:function(){this.doesDeleteOpen||(this.gallery=null,this.initData(null))}}},se=n("6b0d"),ie=n.n(se);const de=ie()(oe,[["render",ee]]);t["default"]=de}}]);
//# sourceMappingURL=chunk-2d0cbec0.b0ef5a30.js.map