(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c89b7"],{5633:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),c={class:"hstack mb-3"},a=Object(o["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),r=Object(o["createTextVNode"])(" Ajouter un nouveau "),s={class:"row"},l={class:"col-lg-12"},i={class:"card"},d={class:"card-body"},u=Object(o["createElementVNode"])("h4",{class:"card-title"},"Listes des catégories",-1),m=Object(o["createElementVNode"])("p",{class:"card-title-desc"},[Object(o["createTextVNode"])(" Le tableau ci-dessous présente la listes des "),Object(o["createElementVNode"])("code",null,"catégories"),Object(o["createTextVNode"])(". ")],-1),b={class:"table-responsive"},O={class:"table align-middle mb-0"},p=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Nom de la catégorie"),Object(o["createElementVNode"])("th",null,"Action")])],-1),j={scope:"row"},g={class:"hstack"},f=Object(o["createElementVNode"])("i",{class:"bx bx-edit font-size-16 align-middle mx-1"},null,-1),h=Object(o["createElementVNode"])("i",{class:"bx bx-trash font-size-16 align-middle mx-1"},null,-1),V={key:0,class:"text-danger mt-2"},E={key:0,class:"mt-3"},v=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),N=[v],k={key:1,class:"mt-3 text-center"},y=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),x=[y],C={key:0,class:"text-danger mt-2"},w={key:0,class:"mt-3"},B=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),D=[B],L={key:1,class:"mt-3 text-center"},S=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),A=[S],T={class:"mb-2"},I=Object(o["createTextVNode"])(" Voulez-vous vraiment supprimer la catégorie "),_=Object(o["createElementVNode"])("p",{class:"text-danger"},"Attention ! Supprimer une catégorie implique la suppression des secteurs de cette catégorie.",-1),q={key:0,class:"hstack mt-2"},z={key:1,class:"text-center"},M=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),U=[M];function P(e,t,n,v,y,B){var S=Object(o["resolveComponent"])("PageHeader"),M=Object(o["resolveComponent"])("b-button"),P=Object(o["resolveComponent"])("router-link"),F=Object(o["resolveComponent"])("b-modal"),H=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(H,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(S,{title:y.title,items:y.items},null,8,["title","items"]),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(M,{variant:"primary",onClick:t[0]||(t[0]=function(e){return v.doesAddOpen=!0}),class:"ms-auto"},{default:Object(o["withCtx"])((function(){return[a,r]})),_:1})]),Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",d,[u,m,Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("table",O,[p,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(y.categories,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("th",j,Object(o["toDisplayString"])(t+1),1),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(P,{to:"/cdn/categories/"+e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])]),Object(o["createElementVNode"])("td",g,[Object(o["createVNode"])(M,{class:"btn-sm",onClick:function(t){return B.initItem(e)},variant:"success"},{default:Object(o["withCtx"])((function(){return[f]})),_:2},1032,["onClick"]),Object(o["createVNode"])(M,{variant:"danger",onClick:function(t){return B.initItem(e,"delete")},class:"ms-2 btn-sm"},{default:Object(o["withCtx"])((function(){return[h]})),_:2},1032,["onClick"])])])})),128))])])])])])])]),Object(o["createVNode"])(F,{modelValue:v.doesAddOpen,"onUpdate:modelValue":t[3]||(t[3]=function(e){return v.doesAddOpen=e}),id:"modal-center",centered:"",title:"Ajouter une catégorie","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(o["withModifiers"])((function(e){return B.addItem()}),["prevent"]))},[Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",required:"",placeholder:"Nom de la catégorie","onUpdate:modelValue":t[1]||(t[1]=function(e){return y.name=e}),class:"form-control"},null,512),[[o["vModelText"],y.name]]),y.errors.name?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",V,Object(o["toDisplayString"])(y.errors.name),1)):Object(o["createCommentVNode"])("",!0)]),y.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",k,x)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",E,N))],32)]})),_:1},8,["modelValue"]),Object(o["createVNode"])(F,{modelValue:v.doesEditOpen,"onUpdate:modelValue":t[6]||(t[6]=function(e){return v.doesEditOpen=e}),id:"modal-center",centered:"",title:"Modifier la catégorie","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[5]||(t[5]=Object(o["withModifiers"])((function(e){return B.editItem()}),["prevent"]))},[Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",required:"",placeholder:"Nom de la catégorie","onUpdate:modelValue":t[4]||(t[4]=function(e){return y.name=e}),class:"form-control"},null,512),[[o["vModelText"],y.name]]),y.errors.name?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",C,Object(o["toDisplayString"])(y.errors.name),1)):Object(o["createCommentVNode"])("",!0)]),y.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",L,A)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",w,D))],32)]})),_:1},8,["modelValue"]),Object(o["createVNode"])(F,{modelValue:v.doesDeleteOpen,"onUpdate:modelValue":t[9]||(t[9]=function(e){return v.doesDeleteOpen=e}),id:"modal-center",title:"Supprimer la catégorie","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){var e;return[Object(o["createElementVNode"])("p",T,[I,Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(null===(e=y.category)||void 0===e?void 0:e.name),1)]),_,y.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,U)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",q,[Object(o["createElementVNode"])("button",{class:"btn btn-dark ms-auto",onClick:t[7]||(t[7]=function(e){return v.doesDeleteOpen=!1})},"Annuler"),Object(o["createElementVNode"])("button",{class:"ms-3 btn btn-danger",onClick:t[8]||(t[8]=function(e){return B.deleteIt()})},"Supprimer")]))]})),_:1},8,["modelValue"])]})),_:1})}n("a4d3"),n("e01a"),n("d3b7"),n("d81d"),n("4de4");var F=n("3d20"),H=n.n(F),J=n("444f"),G=n("c2a4"),K=n("2579"),Q=n("e01f"),R={setup:function(){var e=Object(o["ref"])(!1),t=Object(o["ref"])(!1),n=Object(o["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:n}},page:{title:"Categories",meta:[{name:"description",content:G.description}]},components:{Layout:J["a"],PageHeader:K["a"]},data:function(){return{title:"Catégories",items:[{text:"Menu",href:"/"},{text:"Définition"},{text:"Catégories",active:!0}],errors:[],category:{},categories:[],name:"",loading:!1,status:201}},methods:{loadList:function(){var e=this;fetch(Q["a"].route("categories"),Q["a"].requestOptions()).then((function(e){return Q["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.categories=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("name",this.name),fetch(Q["a"].route("categories"),Q["a"].requestOptions("POST",t)).then((function(t){return Q["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,201==e.status?(e.name="",e.doesAddOpen=!1,e.categories.push(t.data),H.a.fire("Catégorie ajouter !","La catégorie a été enregistrée avec succès.","success")):e.errors.name=Q["a"].getError(t.data,"name")})).catch((function(t){console.log(t),e.loading=!1}))},editItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("name",this.name),t.append("_method","PUT"),console.log(t.get("name"),"id",this.category.id),fetch(Q["a"].route("categories/"+this.category.id),Q["a"].requestOptions("POST",t)).then((function(t){return Q["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log("last",e.category),console.log("new",t.data),e.loading=!1,200==e.status?(e.name="",e.doesEditOpen=!1,e.categories=e.categories.map((function(n){return n.id!==e.category.id?n:t.data})),H.a.fire("Catégorie modifier !","La catégorie a été modifiée avec succès.","success")):e.errors.name=Q["a"].getError(t.data,"name")})).catch((function(t){console.log(t),e.loading=!1}))},deleteIt:function(){var e=this;this.loading=!0,fetch(Q["a"].route("categories/"+this.category.id),Q["a"].requestOptions("DELETE")).then((function(t){return Q["a"].tokenChecker(t.status),e.status=t.status,t.text()})).then((function(t){console.log(e.status),console.log(t),e.name="",e.loading=!1,e.doesDeleteOpen=!1,204==e.status?(e.categories=e.categories.filter((function(t){return t.id!==e.category.id})),H.a.fire("Catégorie supprimer !","La catégorie a été supprimée avec succès.","success")):H.a.fire("Catégorie non supprimer ?","La suppression n'a pas marché, veuillez réessayez plus tard.","error"),e.category=null}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.category=e,console.log("init",this.category),this.name=e.name,"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0}},mounted:function(){this.loadList()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.name="",this.category=null)},doesDeleteOpen:function(){this.doesDeleteOpen||(this.category=null)}}},W=n("6b0d"),X=n.n(W);const Y=X()(R,[["render",P]]);t["default"]=Y}}]);
//# sourceMappingURL=chunk-2d0c89b7.38753beb.js.map