{"version":3,"sources":["webpack:///./src/router/views/pages/general/formulars/show.vue","webpack:///./src/router/views/pages/general/formulars/show.vue?9476"],"names":["class","scope","type","value","role","title","items","formular_responses","length","formular","can_submit","variant","doesAddOpen","name","date","description","formular_quizzes","formular_quiz","i","key","id","quiz","formular_response","response","centered","size","scrollable","title-class","hide-footer","sendResponse","for","required","loading","setup","page","meta","content","components","Layout","PageHeader","data","text","href","active","errors","responses","status","methods","getItem","fetch","route","this","requestOptions","then","tokenChecker","json","console","log","getResponses","document","getElementById","key1","formData","FormData","append","JSON","stringify","fire","getError","catch","error","mounted","$route","params","__exports__","render"],"mappings":"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","file":"js/chunk-2d0c5ad7.a22e6c53.js","sourcesContent":["<script>\r\nimport Swal from 'sweetalert2'\r\n\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\nimport { ref } from \"vue\";\r\n\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n    setup() {\r\n        const doesAddOpen = ref(false);\r\n\r\n        return {\r\n            doesAddOpen,\r\n        };\r\n    },\r\n    page: {\r\n    title: \"Evènement\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Formulaire\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Formulaire\",\r\n          active: true,\r\n        },\r\n        {\r\n          text: \"Un formulaire\",\r\n          active: true,\r\n        },\r\n      ],\r\n      id: \"\",\r\n      quiz: \"\",\r\n      errors: [],\r\n      responses: {},\r\n      formular: {},\r\n      formular_quiz: {},\r\n      formular_responses: [],\r\n      loading: false,\r\n      status: 201,\r\n    };\r\n  },\r\n  methods: {\r\n    getItem() {\r\n      fetch(Helper.route('general/formulars/'+this.id), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log('formulars', data.data);\r\n        this.formular = data.data.formular\r\n        this.formular_responses = data.data.formular_responses\r\n      })\r\n    },\r\n    getResponses() {\r\n      for (let i = 0; i < this.formular.formular_quizzes.length; i++) {\r\n        const formular_quiz = this.formular.formular_quizzes[i];\r\n        let value = document.getElementById(\"quiz\"+formular_quiz['id']).value\r\n        let key1 = \"quiz\"+formular_quiz['id']\r\n        this.responses[key1] = value\r\n      }\r\n    },\r\n    sendResponse() {\r\n      this.loading = true\r\n      this.errors = []\r\n      this.getResponses()\r\n      let formData = new FormData()\r\n      formData.append('responses', JSON.stringify(this.responses))\r\n      formData.append(\"formular_id\", this.id)\r\n      fetch(Helper.route('general/formular-responses'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        if (this.status == 200) {\r\n          this.formular = data.data.formular\r\n          this.formular_responses = data.data.formular_responses\r\n          this.doesAddOpen = false\r\n          Swal.fire(\"Réponse envoyé !\", \"Vos réponses ont été envoyées avec succès.\", \"success\");\r\n        } else {\r\n          this.errors.quiz = Helper.getError(data.data, \"quiz\")\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loading = false\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id\r\n    this.getItem()\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n    \r\n    <div class=\"hstack mb-3\" v-if=\"!formular_responses.length > 0 && formular.can_submit\">\r\n        <b-button variant=\"success\" @click=\"doesAddOpen = true\" class=\"ms-auto\">\r\n            <i class=\"bx bx-send font-size-16 align-middle me-2\"></i>\r\n            Envoyer vos réponses\r\n        </b-button>\r\n    </div>\r\n    \r\n    \r\n    <div class=\"row\" v-if=\"formular != {}\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title\">{{ formular.name }}</h4>\r\n            <p class=\"text-danger mb-2\">\r\n                Date de Fin : {{ formular.date }}\r\n            </p>\r\n            <p class=\"card-title-desc\">\r\n              {{ formular.description }}\r\n            </p>\r\n            \r\n            <div class=\"bg-light p-3 pt-3\" v-if=\"formular_responses.length == 0\">\r\n                <h6 class=\"font-20 text-danger\">♣ Listes des questions</h6>\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table align-middle mb-0\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Question</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr v-for=\"(formular_quiz, i) in formular.formular_quizzes\" :key=\"formular_quiz.id\">\r\n                                <th scope=\"row\">{{ i + 1 }}</th>\r\n                                <td>\r\n                                  {{ formular_quiz.quiz }}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class=\"bg-light p-3 pt-3\" v-else>\r\n                <h6 class=\"font-20 text-danger\">♣ Vos réponses</h6>\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table align-middle mb-0\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Question</th>\r\n                                <th>Réponse</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr v-for=\"(formular_response, i) in formular_responses\" :key=\"formular_response.id\">\r\n                                <th scope=\"row\">{{ i + 1 }}</th>\r\n                                <td>\r\n                                  {{ formular_response.formular_quiz.quiz }}\r\n                                </td>\r\n                                <td>\r\n                                  {{ formular_response.response }}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ADD MODAL -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen\"\r\n        id=\"modal-center\"\r\n        centered\r\n        size=\"lg\"\r\n        scrollable\r\n        title=\"Envoyez votre réponse\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <form @submit.prevent=\"sendResponse()\">\r\n          <div class=\"mb-3\" v-for=\"(formular_quiz, i) in formular.formular_quizzes\" :key=\"formular_quiz.id\">\r\n            <label :for=\"'quiz'+formular_quiz.id\">{{ i+1 +\" - \"+ formular_quiz.quiz }}</label>\r\n            <input type=\"text\" required :id=\"'quiz'+formular_quiz.id\" class=\"form-control\">\r\n          </div>\r\n          <div class=\"\" v-if=\"!loading\">\r\n            <input type=\"submit\" value=\"Enregistrer\" class=\"btn btn-primary\">\r\n          </div>\r\n          <div class=\" text-center\" v-else>\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./show.vue?vue&type=template&id=5d6c5746\"\nimport script from \"./show.vue?vue&type=script&lang=js\"\nexport * from \"./show.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}