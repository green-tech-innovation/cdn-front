{"version":3,"sources":["webpack:///./src/router/views/pages/sector/sub-activities/show.vue","webpack:///./src/router/views/pages/sector/sub-activities/show.vue?ab6f"],"names":["class","for","type","id","required","accept","value","role","title","items","sub_activity","name","file","href","STORAGE_URL","target","amount","date_start","date_end","description","report","date_report","approved","message","date_approved","sendReport","errors","loading","page","meta","content","components","Layout","PageHeader","data","text","active","status","methods","getItem","fetch","route","this","requestOptions","then","response","tokenChecker","json","console","log","formData","FormData","append","document","getElementById","files","fire","getError","catch","error","mounted","$route","params","__exports__","render"],"mappings":"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","file":"js/chunk-2d0cc586.df9522a8.js","sourcesContent":["<script>\r\nimport Swal from 'sweetalert2'\r\n\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n    page: {\r\n    title: \"Categories\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Projet\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Projet\",\r\n          active: true,\r\n        },\r\n        {\r\n          text: \"Un projet\",\r\n          active: true,\r\n        },\r\n      ],\r\n      errors: [],\r\n      id: \"\",\r\n      loading: false,\r\n      sub_activity: {},\r\n      status: 201,\r\n      STORAGE_URL: Helper.STORAGE_URL,\r\n    };\r\n  },\r\n  methods: {\r\n    getItem() {\r\n      fetch(Helper.route('sector/sub-activities/'+this.id), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(data.data);\r\n        this.sub_activity = data.data\r\n      })\r\n    },\r\n    sendReport() {\r\n      this.loading = true\r\n      this.errors = []\r\n      let formData = new FormData()\r\n      formData.append('sub_activity_id', this.id)\r\n      formData.append('report', document.getElementById(\"report\").files[0])\r\n      fetch(Helper.route('sector/sub-activities/'+this.id+'/report'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        if (this.status == 200) {\r\n          this.sub_activity = data.data\r\n          Swal.fire(\"Rapport envoyé !\", \"Le rapport a été envoyé avec succès.\", \"success\");\r\n        } else {\r\n          this.errors.report = Helper.getError(data.data, \"report\")\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loading = false\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id\r\n    this.getItem()\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n\r\n    \r\n    <div class=\"row\" v-if=\"sub_activity.id\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title text-primary mb-3\">{{ sub_activity.name }}</h4>\r\n            <p><b>Fichier du projet</b> : \r\n                <a :href=\"STORAGE_URL+sub_activity.file\" v-if=\"sub_activity.file\" target=\"_blank\" class=\"btn btn-sm btn-success rounded-pill\">\r\n                    <i class=\"bx bx-download font-size-14 align-middle mx-1 text-white\"></i>\r\n                    Télécharger le Fichier\r\n                </a>\r\n            </p>\r\n            <p><b>Montant alloué</b> : {{ sub_activity.amount }} F CFA</p>\r\n            <p><b>Date debut</b> : {{ sub_activity.date_start }}</p>\r\n            <p><b>Date Fin</b> : {{ sub_activity.date_end }}</p>\r\n            <h6><b>Description</b></h6>\r\n            <p class=\"card-title-desc\">\r\n              {{ sub_activity.description }}\r\n            </p>\r\n\r\n            <div class=\"bg-light p-2 mt-3 mb-0 pt-3\" v-if=\"sub_activity.report\">\r\n                <p><b>Rapport</b> : <br>\r\n                    <a :href=\"STORAGE_URL+sub_activity.report\" target=\"_blank\" class=\"btn btn-sm btn-success rounded-pill\">\r\n                        <i class=\"bx bx-download font-size-14 align-middle mx-1 text-white\"></i>\r\n                        Télécharger le Fichier\r\n                    </a>\r\n                </p>\r\n                <p><b>Date d'envoie</b> : <br> {{ sub_activity.date_report }}</p>\r\n            </div>\r\n            \r\n\r\n            <div class=\"bg-light border shadow p-2 mt-3 mb-0 pt-3\" v-if=\"sub_activity.approved == -1\">\r\n              <p><b>Statut du rapport</b> : <br><span class=\"text-danger\">Réjété</span></p>\r\n              <p><b>Message de rejet</b> : <br>{{ sub_activity.message }} </p>\r\n            </div>\r\n            \r\n\r\n            <div class=\"bg-light border shadow p-2 mt-3 mb-0 pt-3\" v-if=\"sub_activity.approved == 1\">\r\n              <p><b>Statut du rapport</b> : <br><span class=\"text-success\">Accepté</span></p>\r\n              <p><b>Date d'approbation</b> : <br>{{ sub_activity.date_approved }} </p>\r\n            </div>\r\n\r\n            <div v-if=\"!sub_activity.report || (sub_activity.approved == -1 && sub_activity.report)\" class=\"col-lg-6 bg-light border rounded p-3 pt-3 mt-3\">\r\n                <h5 class=\"mb-3 text-danger\">♣ Envoyer le rapport</h5>\r\n                <form @submit.prevent=\"sendReport()\">\r\n                    <div class=\"row\">\r\n                        <div class=\"\">\r\n                            <label for=\"\">Fichier explicatif </label>\r\n                            <input type=\"file\" id=\"report\" required accept=\".pdf, .docx\" class=\"form-control\">\r\n                            <span class=\"text-danger mt-2\" v-if=\"errors.report\">{{ errors.report }}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mt-3\" v-if=\"!loading\">\r\n                        <input type=\"submit\" value=\"Envoyer le rapport\" class=\"btn btn-primary\">\r\n                    </div>\r\n                    <div class=\"mt-3 text-center\" v-else>\r\n                        <div class=\"spinner-border text-primary\" role=\"status\">\r\n                        <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./show.vue?vue&type=template&id=c37920e8\"\nimport script from \"./show.vue?vue&type=script&lang=js\"\nexport * from \"./show.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}