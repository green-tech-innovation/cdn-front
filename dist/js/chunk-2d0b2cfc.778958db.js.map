{"version":3,"sources":["webpack:///./src/router/views/pages/cdn/gallery/show.vue","webpack:///./src/router/views/pages/cdn/gallery/show.vue?9ada"],"names":["class","for","type","multiple","accept","required","id","value","role","title","items","gallery","variant","doesAddOpen","name","gallery_files","gallery_file","key","src","STORAGE_URL","file","initItem","style","alt","centered","title-class","hide-footer","addItem","errors","loading","doesShowOpen","doesDeleteOpen","deleteIt","setup","page","meta","content","description","components","Layout","PageHeader","data","text","href","active","methods","getItem","fetch","route","this","requestOptions","then","response","tokenChecker","status","json","console","log","formData","FormData","append","document","getElementById","files","push","fire","getError","catch","error","filter","i","action","mounted","$route","params","__exports__","render"],"mappings":"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","file":"js/chunk-2d0b2cfc.778958db.js","sourcesContent":["<script>\r\nimport Swal from 'sweetalert2'\r\n\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\nimport { ref } from \"vue\";\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n    setup() {\r\n        const doesAddOpen = ref(false);\r\n        const doesDeleteOpen = ref(false);\r\n        const doesShowOpen = ref(false)\r\n\r\n        return {\r\n            doesAddOpen,\r\n            doesDeleteOpen,\r\n            doesShowOpen\r\n        };\r\n    },\r\n    page: {\r\n    title: \"Galérie\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Galérie\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Galérie\",\r\n          active: true,\r\n        },\r\n        {\r\n          text: \"Un Album\",\r\n          active: true,\r\n        },\r\n      ],\r\n      errors: [],\r\n      gallery: {},\r\n      gallery_file: [],\r\n      loading: false,\r\n      id: \"\",\r\n      STORAGE_URL: Helper.STORAGE_URL,\r\n    };\r\n  },\r\n  methods: {\r\n    getItem() {\r\n      fetch(Helper.route('gallerys/'+this.id), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(data.data);\r\n        this.gallery = data.data\r\n      })\r\n    },\r\n    addItem() {\r\n        this.loading = true\r\n        this.errors = []\r\n        let formData = new FormData()\r\n        formData.append('gallery_id', this.id)\r\n        formData.append('file', document.getElementById(\"file\").files[0])\r\n        fetch(Helper.route('gallery-files'), Helper.requestOptions(\"POST\", formData))\r\n        .then(response => {\r\n            Helper.tokenChecker(response.status)\r\n            this.status = response.status\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n            console.log(this.status);\r\n            console.log(data);\r\n            this.loading = false\r\n            if (this.status == 200) {\r\n            this.doesAddOpen = false\r\n            this.gallery.gallery_files.push(data.data)\r\n            Swal.fire(\"Fichier ajouter !\", \"Le fichier a été enregistré avec succès.\", \"success\");\r\n            } else {\r\n            this.errors.file = Helper.getError(data.data, \"file\")\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            this.loading = false\r\n        })\r\n    },\r\n    deleteIt() {\r\n      this.loading = true\r\n      fetch(Helper.route('gallery-files/'+this.gallery_file.id), Helper.requestOptions(\"DELETE\"))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.text()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        this.doesDeleteOpen = false\r\n        if (this.status == 204) {\r\n          this.gallery.gallery_files = this.gallery.gallery_files.filter(i => i.id !== this.gallery_file.id)\r\n          Swal.fire(\"Fichier supprimer !\", \"Le fichier a été supprimé avec succès.\", \"success\");\r\n        } else {\r\n          Swal.fire(\"Fichier non supprimer ?\", \"La suppression n'a pas marché, veuillez réssayez plus tard.\", \"error\");\r\n        }\r\n      })\r\n    },\r\n    initItem(gallery_file, action=\"edit\") {\r\n        this.gallery_file = gallery_file\r\n        if (action == \"delete\") {\r\n          this.doesDeleteOpen = true\r\n        } else {\r\n          this.doesShowOpen = true\r\n        }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id\r\n    this.getItem()\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n\r\n    <div class=\"hstack mb-3\" v-if=\"gallery.id\">\r\n        <b-button variant=\"primary\" @click=\"doesAddOpen = true\" class=\"ms-auto\">\r\n            <i class=\"bx bx-plus font-size-16 align-middle me-2\"></i>\r\n            Ajouter un nouveau\r\n        </b-button>\r\n    </div>\r\n    \r\n    <div class=\"row\" v-if=\"gallery.id\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title\">Listes des photos et vidéos de l'album </h4>\r\n            <p class=\"card-title-desc\">\r\n              Le tableau ci-dessous présente la listes des <code>photos et vidéos</code> de l'album <code>{{ gallery.name }}</code>.\r\n            </p>\r\n\r\n            <div class=\"row bg-light g-3 pb-3 px-1\">\r\n                <div class=\"col-lg-3 col-md-4 col-sm-6\" v-for=\"(gallery_file) in gallery.gallery_files\" :key=\"gallery_file.id\">\r\n                    <div class=\"bg-white p-2 rounded\">\r\n                        <img :src=\"STORAGE_URL+gallery_file.file\" @click=\"initItem(gallery_file)\" type=\"button\" class=\"w-100 rounded\" style=\"height: 150px; object-fit: cover;\" alt=\"\">\r\n                        <b-button variant=\"danger\" @click=\"initItem(gallery_file, 'delete')\" class=\"mt-2 w-100 btn-sm\">\r\n                            <i class=\"bx bx-trash font-size-16 align-middle mx-1\"></i>\r\n                        </b-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    \r\n    <!-- ADD MODAL -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen\"\r\n        id=\"modal-center\"\r\n        centered\r\n        title=\"Ajouter un fichier\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <form @submit.prevent=\"addItem()\">\r\n            <div class=\"\">\r\n                <label for=\"\">Fichier(s)</label>\r\n                <input type=\"file\" multiple accept=\".png, .jpg, .jpeg, .mp4, .avi\" required id=\"file\" class=\"form-control\">\r\n                <span class=\"text-danger mt-2\" v-if=\"errors.file\">{{ errors.file }}</span>\r\n            </div>\r\n            <div class=\"mt-3\" v-if=\"!loading\">\r\n                <input type=\"submit\" value=\"Enregistrer\" class=\"btn btn-primary\">\r\n            </div>\r\n            <div class=\"mt-3 text-center\" v-else>\r\n                <div class=\"spinner-border text-primary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n    <!-- SHOW MODAL -->\r\n    <b-modal\r\n        v-model=\"doesShowOpen\"\r\n        id=\"modal-center\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <img :src=\"STORAGE_URL+gallery_file.file\" class=\"w-100 rounded\" alt=\"\">\r\n    </b-modal>\r\n\r\n    <!-- DELETE MODAL -->\r\n    <b-modal\r\n        v-model=\"doesDeleteOpen\"\r\n        id=\"modal-center\"\r\n        title=\"Supprimer le fichier\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <p class=\"mb-2\">\r\n            Voulez-vous vraiment supprimer ce fichier ?\r\n        </p>\r\n        <div class=\"hstack mt-2\" v-if=\"!loading\">\r\n          <button class=\"btn btn-dark ms-auto\" @click=\"doesDeleteOpen = false\">Annuler</button>\r\n          <button class=\"ms-3 btn btn-danger\" @click=\"deleteIt()\">Supprimer</button>\r\n        </div>\r\n        <div class=\"text-center\" v-else>\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n    </b-modal>\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./show.vue?vue&type=template&id=267d5684\"\nimport script from \"./show.vue?vue&type=script&lang=js\"\nexport * from \"./show.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}