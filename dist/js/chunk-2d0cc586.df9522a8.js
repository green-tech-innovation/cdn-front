(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc586"],{"4e10":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("a4d3"),c("e01a");var a=c("7a23"),r={key:0,class:"row"},o={class:"col-lg-12"},n={class:"card"},l={class:"card-body"},i={class:"card-title text-primary mb-3"},s=Object(a["createElementVNode"])("b",null,"Fichier du projet",-1),b=Object(a["createTextVNode"])(" : "),d=["href"],u=Object(a["createElementVNode"])("i",{class:"bx bx-download font-size-14 align-middle mx-1 text-white"},null,-1),p=Object(a["createTextVNode"])(" Télécharger le Fichier "),m=[u,p],j=Object(a["createElementVNode"])("b",null,"Montant alloué",-1),O=Object(a["createElementVNode"])("b",null,"Date debut",-1),N=Object(a["createElementVNode"])("b",null,"Date Fin",-1),V=Object(a["createElementVNode"])("h6",null,[Object(a["createElementVNode"])("b",null,"Description")],-1),E={class:"card-title-desc"},v={key:0,class:"bg-light p-2 mt-3 mb-0 pt-3"},y=Object(a["createElementVNode"])("b",null,"Rapport",-1),g=Object(a["createTextVNode"])(" : "),h=Object(a["createElementVNode"])("br",null,null,-1),k=["href"],f=Object(a["createElementVNode"])("i",{class:"bx bx-download font-size-14 align-middle mx-1 text-white"},null,-1),x=Object(a["createTextVNode"])(" Télécharger le Fichier "),_=[f,x],T=Object(a["createElementVNode"])("b",null,"Date d'envoie",-1),B=Object(a["createTextVNode"])(" : "),w=Object(a["createElementVNode"])("br",null,null,-1),S={key:1,class:"bg-light border shadow p-2 mt-3 mb-0 pt-3"},D=Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("b",null,"Statut du rapport"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("br"),Object(a["createElementVNode"])("span",{class:"text-danger"},"Réjété")],-1),C=Object(a["createElementVNode"])("b",null,"Message de rejet",-1),R=Object(a["createTextVNode"])(" : "),F=Object(a["createElementVNode"])("br",null,null,-1),L={key:2,class:"bg-light border shadow p-2 mt-3 mb-0 pt-3"},A=Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("b",null,"Statut du rapport"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("br"),Object(a["createElementVNode"])("span",{class:"text-success"},"Accepté")],-1),P=Object(a["createElementVNode"])("b",null,"Date d'approbation",-1),U=Object(a["createTextVNode"])(" : "),G=Object(a["createElementVNode"])("br",null,null,-1),M={key:3,class:"col-lg-6 bg-light border rounded p-3 pt-3 mt-3"},q=Object(a["createElementVNode"])("h5",{class:"mb-3 text-danger"},"♣ Envoyer le rapport",-1),I={class:"row"},z={class:""},H=Object(a["createElementVNode"])("label",{for:""},"Fichier explicatif ",-1),J=Object(a["createElementVNode"])("input",{type:"file",id:"report",required:"",accept:".pdf, .docx",class:"form-control"},null,-1),$={key:0,class:"text-danger mt-2"},K={key:0,class:"mt-3"},Q=Object(a["createElementVNode"])("input",{type:"submit",value:"Envoyer le rapport",class:"btn btn-primary"},null,-1),W=[Q],X={key:1,class:"mt-3 text-center"},Y=Object(a["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),Z=[Y];function ee(e,t,c,u,p,f){var x=Object(a["resolveComponent"])("PageHeader"),Q=Object(a["resolveComponent"])("Layout");return Object(a["openBlock"])(),Object(a["createBlock"])(Q,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(x,{title:p.title,items:p.items},null,8,["title","items"]),p.sub_activity.id?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("h4",i,Object(a["toDisplayString"])(p.sub_activity.name),1),Object(a["createElementVNode"])("p",null,[s,b,p.sub_activity.file?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:0,href:p.STORAGE_URL+p.sub_activity.file,target:"_blank",class:"btn btn-sm btn-success rounded-pill"},m,8,d)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("p",null,[j,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(p.sub_activity.amount)+" F CFA",1)]),Object(a["createElementVNode"])("p",null,[O,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(p.sub_activity.date_start),1)]),Object(a["createElementVNode"])("p",null,[N,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(p.sub_activity.date_end),1)]),V,Object(a["createElementVNode"])("p",E,Object(a["toDisplayString"])(p.sub_activity.description),1),p.sub_activity.report?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createElementVNode"])("p",null,[y,g,h,Object(a["createElementVNode"])("a",{href:p.STORAGE_URL+p.sub_activity.report,target:"_blank",class:"btn btn-sm btn-success rounded-pill"},_,8,k)]),Object(a["createElementVNode"])("p",null,[T,B,w,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(p.sub_activity.date_report),1)])])):Object(a["createCommentVNode"])("",!0),-1==p.sub_activity.approved?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",S,[D,Object(a["createElementVNode"])("p",null,[C,R,F,Object(a["createTextVNode"])(Object(a["toDisplayString"])(p.sub_activity.message),1)])])):Object(a["createCommentVNode"])("",!0),1==p.sub_activity.approved?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[A,Object(a["createElementVNode"])("p",null,[P,U,G,Object(a["createTextVNode"])(Object(a["toDisplayString"])(p.sub_activity.date_approved),1)])])):Object(a["createCommentVNode"])("",!0),!p.sub_activity.report||-1==p.sub_activity.approved&&p.sub_activity.report?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",M,[q,Object(a["createElementVNode"])("form",{onSubmit:t[0]||(t[0]=Object(a["withModifiers"])((function(e){return f.sendReport()}),["prevent"]))},[Object(a["createElementVNode"])("div",I,[Object(a["createElementVNode"])("div",z,[H,J,p.errors.report?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",$,Object(a["toDisplayString"])(p.errors.report),1)):Object(a["createCommentVNode"])("",!0)])]),p.loading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",X,Z)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",K,W))],32)])):Object(a["createCommentVNode"])("",!0)])])])])):Object(a["createCommentVNode"])("",!0)]})),_:1})}c("d3b7");var te=c("3d20"),ce=c.n(te),ae=c("444f"),re=c("c2a4"),oe=c("2579"),ne=c("e01f"),le={page:{title:"Categories",meta:[{name:"description",content:re.description}]},components:{Layout:ae["a"],PageHeader:oe["a"]},data:function(){return{title:"Projet",items:[{text:"Menu",href:"/"},{text:"Projet",active:!0},{text:"Un projet",active:!0}],errors:[],id:"",loading:!1,sub_activity:{},status:201,STORAGE_URL:ne["a"].STORAGE_URL}},methods:{getItem:function(){var e=this;fetch(ne["a"].route("sector/sub-activities/"+this.id),ne["a"].requestOptions()).then((function(e){return ne["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.sub_activity=t.data}))},sendReport:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("sub_activity_id",this.id),t.append("report",document.getElementById("report").files[0]),fetch(ne["a"].route("sector/sub-activities/"+this.id+"/report"),ne["a"].requestOptions("POST",t)).then((function(t){return ne["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.sub_activity=t.data,ce.a.fire("Rapport envoyé !","Le rapport a été envoyé avec succès.","success")):e.errors.report=ne["a"].getError(t.data,"report")})).catch((function(t){console.log(t),e.loading=!1}))}},mounted:function(){this.id=this.$route.params.id,this.getItem()}},ie=c("6b0d"),se=c.n(ie);const be=se()(le,[["render",ee]]);t["default"]=be}}]);
//# sourceMappingURL=chunk-2d0cc586.df9522a8.js.map