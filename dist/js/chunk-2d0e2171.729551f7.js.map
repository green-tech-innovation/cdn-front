{"version":3,"sources":["webpack:///./src/router/views/account/login.vue","webpack:///./src/store/user.js","webpack:///./src/router/views/account/login.vue?2065"],"names":["class","src","alt","height","role","target","href","to","authError","notification","message","type","tryToLogIn","id","label","label-for","email","placeholder","v$","$errors","item","index","key","$message","password","submitted","$error","required","value","loading","variant","Date","getFullYear","useUserStore","defineStore","state","user","actions","setUser","this","setup","store","page","title","meta","name","content","description","components","Layout","data","tryingToLogIn","isAuthError","validations","withMessage","computed","$store","methods","$touch","$invalid","registerFormData","FormData","append","fetch","route","requestOptions","then","response","json","console","log","status","localStorage","setItem","CLIENT_TOKEN","token","WHO_CONNECTED","entity","$router","push","catch","error","__exports__","render"],"mappings":"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","file":"js/chunk-2d0e2171.729551f7.js","sourcesContent":["<script>\nimport Helper from '@/helpers/helper';\nimport { useUserStore } from '@/store/user';\n\nimport Layout from \"../../layouts/auth\";\n\nimport appConfig from \"@/app.config\";\nimport { required, email, helpers } from \"@vuelidate/validators\";\nimport useVuelidate from \"@vuelidate/core\";\n\n/**\n * Login component\n */\nexport default {\n  setup() {\n    return { v$: useVuelidate(), store: useUserStore() };\n  },\n  page: {\n    title: \"Login\",\n    meta: [\n      {\n        name: \"description\",\n        content: appConfig.description,\n      },\n    ],\n  },\n  components: {\n    Layout,\n  },\n  data() {\n    return {\n      email: \"emailagentcdn@gmail.com\",//\"vinceles.so.n@gmail.com\",\n      password: \"123456\",\n      type: \"CDN\",//\"SECTOR\",\n      loading: false,\n      submitted: false,\n      authError: null,\n      tryingToLogIn: false,\n      isAuthError: false,\n    };\n  },\n  validations: {\n    email: {\n      required: helpers.withMessage(\"Email is required\", required),\n      email: helpers.withMessage(\"Please enter valid email\", email),\n    },\n    password: {\n      required: helpers.withMessage(\"Password is required\", required),\n    },\n    type: {\n      required: helpers.withMessage(\"type is required\", required),\n    },\n  },\n  computed: {\n    notification() {\n      return this.$store ? this.$store.state.notification : null;\n    },\n  },\n  methods: {\n    tryToLogIn() {\n      this.submitted = true;\n      // stop here if form is invalid\n      this.v$.$touch();\n\n      if (this.v$.$invalid) {\n        return;\n      } else {\n        this.authError = null\n        let registerFormData = new FormData()\n        registerFormData.append('email', this.email)\n        registerFormData.append('password', this.password)\n        registerFormData.append('type', this.type)\n\n        fetch(Helper.route('auth/login'), Helper.requestOptions(\"POST\", registerFormData))\n        .then(response => {\n            return response.json()\n        })\n        .then(data => {\n          console.log(data);\n          if (data.status == false) {\n            this.authError = data.message\n          } else {\n              localStorage.setItem(Helper.CLIENT_TOKEN, data.token)\n              localStorage.setItem(Helper.WHO_CONNECTED, this.type)\n              localStorage.setItem(\"entity_id\", data.entity.id)\n              this.store.setUser(data.user)\n              if (this.type == \"CDN\") {\n                this.$router.push({name: \"cdn_sectors\"})\n              } else if(this.type == \"SECTOR\") {\n                this.$router.push({name: \"sector_projects\"})\n              } else {\n                this.$router.push({name: \"patner_projects\"})\n              }      \n          }\n        })\n        .catch(error => {\n            console.log(error)\n        });\n      }\n    },\n  },\n\n\n\n};\n</script>\n\n<template>\n  <Layout>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-8 col-lg-6 col-xl-5\">\n        <div class=\"card overflow-hidden\">\n          <div class=\"bg-soft bg-primary\">\n            <div class=\"row\">\n              <div class=\"col-7\">\n                <div class=\"text-primary p-4\">\n                  <h5 class=\"text-primary\">Heureux de vous revoir !</h5>\n                  <p>Connectez-vous à CDN.</p>\n                </div>\n              </div>\n              <div class=\"col-5 align-self-end\">\n                <img\n                  src=\"@/assets/images/profile-img.png\"\n                  alt\n                  class=\"img-fluid\"\n                />\n              </div>\n            </div>\n          </div>\n          <div class=\"card-body pt-0\">\n            <div>\n              <router-link to=\"/\">\n                <div class=\"avatar-md profile-user-wid mb-4\">\n                  <span class=\"avatar-title rounded-circle bg-light\">\n                    <img src=\"@/assets/images/logo.svg\" alt height=\"34\" />\n                  </span>\n                </div>\n              </router-link>\n            </div>\n            \n            <div class=\"alert alert-danger\" v-if=\"authError\">{{ authError }}</div>\n            <div\n              v-if=\"notification.message\"\n              :class=\"'alert ' + notification.type\"\n            >\n              {{ notification.message }}\n            </div>\n\n            <b-form class=\"p-2\" @submit.prevent=\"tryToLogIn\">\n              <b-form-group\n                class=\"mb-3\"\n                id=\"input-group-1\"\n                label=\"Email\"\n                label-for=\"input-1\"\n              >\n                <b-form-input\n                  id=\"input-1\"\n                  v-model=\"email\"\n                  type=\"text\"\n                  placeholder=\"Entrez votre email\"\n                  :class=\"{\n                    'is-invalid': submitted && v$.email.$error,\n                  }\"\n                ></b-form-input>\n\n                <div\n                  v-for=\"(item, index) in v$.email.$errors\"\n                  :key=\"index\"\n                  class=\"invalid-feedback\"\n                >\n                  <span v-if=\"item.$message\">{{ item.$message }}</span>\n                </div>\n              </b-form-group>\n\n              <b-form-group\n                class=\"mb-3\"\n                id=\"input-group-2\"\n                label=\"Mot de passe\"\n                label-for=\"input-2\"\n              >\n                <b-form-input\n                  id=\"input-2\"\n                  v-model=\"password\"\n                  type=\"password\"\n                  placeholder=\"Entrez votre mot de passe\"\n                  :class=\"{\n                    'is-invalid': submitted && v$.password.$error,\n                  }\"\n                ></b-form-input>\n                <div\n                  v-if=\"submitted && v$.password.$error\"\n                  class=\"invalid-feedback\"\n                >\n                  <span v-if=\"v$.password.required.$message\">{{\n                    v$.password.required.$message\n                  }}</span>\n                </div>\n              </b-form-group>\n\n              <b-form-group\n                class=\"mb-3\"\n                id=\"input-group-3\"\n                label=\"Se connecter en tant que\"\n                label-for=\"input-3\"\n              >\n                <b-form-select class=\"form-select mb-3\" required v-model=\"type\">\n                  <b-form-select-option value=\"CDN\">CDN</b-form-select-option>\n                  <b-form-select-option value=\"SECTOR\">Secteur</b-form-select-option>\n                  <b-form-select-option value=\"PATNER\">Partenaire</b-form-select-option>\n                </b-form-select>\n\n                <div\n                    v-if=\"submitted && v$.type.$error\"\n                    class=\"invalid-feedback\"\n                  >\n                  <span v-if=\"v$.type.required.$message\">{{\n                    v$.type.required.$message\n                  }}</span>\n                </div>\n              </b-form-group>\n\n              <div class=\"mt-3 d-grid\" v-if=\"!loading\">\n                <b-button type=\"submit\" variant=\"primary\" class=\"btn-block\">Se connecter</b-button>\n              </div>\n              <div class=\"mt-3 text-center\" v-else>\n                <div class=\"spinner-border text-primary\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n              <div class=\"mt-4 text-center\">\n                <router-link to=\"/forgot-password\" class=\"text-muted\">\n                  <i class=\"mdi mdi-lock me-1\"></i> Mot de passe oublié ?\n                </router-link>\n              </div>\n            </b-form>\n          </div>\n          <!-- end card-body -->\n        </div>\n        <!-- end card -->\n\n        <div class=\"mt-1 text-center\">\n          <p>\n            © {{ new Date().getFullYear() }} CDN. Créer avec\n            <i class=\"mdi mdi-heart text-danger\"></i> par <a target=\"_blank\" href=\"https://green-tech-innovation.com/\">Green Tech Innovation</a>\n          </p>\n        </div>\n        <!-- end row -->\n      </div>\n      <!-- end col -->\n    </div>\n    <!-- end row -->\n  </Layout>\n</template>","import { defineStore } from 'pinia'\r\n\r\nexport const useUserStore = defineStore('user', {\r\n    state: () => {\r\n        return {\r\n            user: {}\r\n        }\r\n    },\r\n    actions: {\r\n        setUser(user) {\r\n            this.user = user\r\n        }\r\n    },\r\n})","import { render } from \"./login.vue?vue&type=template&id=6d0259ac\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}