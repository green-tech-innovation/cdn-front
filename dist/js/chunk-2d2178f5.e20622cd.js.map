{"version":3,"sources":["webpack:///./src/router/views/pages/cdn/formulars/show.vue","webpack:///./src/router/views/pages/cdn/formulars/show.vue?8ddc"],"names":["class","role","scope","for","type","value","title","items","formular","is_published","formular_quizzes","length","loadingPublish","variant","publishFormular","doesAddOpen","doesAddOpen1","name","date","description","formular_quiz","i","key","id","to","quiz","formular_responses","created_at","formular_participants","participant","entity","initParticiant","centered","title-class","hide-footer","addItem","required","errors","loading","addParticipant","multiple","entity_id","entities","doesDeleteOpen","deleteIt","setup","doesEditOpen","page","meta","content","components","Layout","PageHeader","data","text","href","active","status","methods","getItem","fetch","route","this","requestOptions","then","response","tokenChecker","json","console","log","loadEntities","fire","formData","FormData","append","push","getError","catch","error","JSON","stringify","filter","initItem","action","mounted","$route","params","watch","selected_ids","map","i1","__exports__","render"],"mappings":"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","file":"js/chunk-2d2178f5.e20622cd.js","sourcesContent":["<script>\r\nimport Swal from 'sweetalert2'\r\n\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\nimport { ref } from \"vue\";\r\n\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n    setup() {\r\n        const doesAddOpen = ref(false);\r\n        const doesAddOpen1 = ref(false);\r\n        const doesEditOpen = ref(false);\r\n        const doesDeleteOpen = ref(false);\r\n\r\n        return {\r\n            doesAddOpen,\r\n            doesAddOpen1,\r\n            doesEditOpen,\r\n            doesDeleteOpen,\r\n        };\r\n    },\r\n    page: {\r\n    title: \"Evènement\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Formulaire\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Formulaire\",\r\n          active: true,\r\n        },\r\n        {\r\n          text: \"Un formulaire\",\r\n          active: true,\r\n        },\r\n      ],\r\n      id: \"\",\r\n      quiz: \"\",\r\n      entities: [],\r\n      entity_id: null,\r\n      participant: null,\r\n      errors: [],\r\n      formular: {},\r\n      formular_quiz: {},\r\n      loading: false,\r\n      loadingPublish: false,\r\n      status: 201,\r\n    };\r\n  },\r\n  methods: {\r\n    getItem() {\r\n      fetch(Helper.route('formulars/'+this.id), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log('formulars', data.data);\r\n        this.formular = data.data\r\n      })\r\n    },\r\n    loadEntities() {\r\n      fetch(Helper.route('entities'), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        this.entities = data.data\r\n      })\r\n    },\r\n    publishFormular() {\r\n        this.loadingPublish = true\r\n        fetch(Helper.route('formulars/'+this.id+'/publish'), Helper.requestOptions())\r\n        .then(response => {\r\n            Helper.tokenChecker(response.status)\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n            this.loadingPublish = false\r\n            this.formular = data.data\r\n            Swal.fire(\"Formulaire publié !\", \"Un message de rappel a été déjà envoyé  à tous les secteurs et partenaires pour participer de façon facultative.\", \"success\");\r\n            console.log(data);\r\n        })\r\n    },\r\n    addItem() {\r\n      this.loading = true\r\n      this.errors = []\r\n      let formData = new FormData()\r\n      formData.append('quiz', this.quiz)\r\n      formData.append(\"formular_id\", this.id)\r\n      fetch(Helper.route('formular-quizzes'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        if (this.status == 200) {\r\n          this.quiz = \"\"\r\n          this.doesAddOpen = false\r\n          this.formular.formular_quizzes.push(data.data)\r\n          Swal.fire(\"Question ajouter !\", \"La question a été enregistrée avec succès.\", \"success\");\r\n        } else {\r\n          this.errors.quiz = Helper.getError(data.data, \"quiz\")\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loading = false\r\n      })\r\n    },\r\n    addParticipant() {\r\n      this.loading = true\r\n      this.errors = []\r\n      let formData = new FormData()\r\n      formData.append(\"formular_id\", this.id)\r\n      formData.append('entity_id', JSON.stringify(this.entity_id))\r\n      fetch(Helper.route('formular-participants'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(data);\r\n        this.loading = false\r\n        if (this.status == 200) {\r\n          this.entity_id = null\r\n          this.doesAddOpen1 = false\r\n          this.formular.formular_participants = data.data\r\n          Swal.fire(\"Participant ajouter !\", \"Le(les) participants a (ont) été enregistré(s) avec succès.\", \"success\");\r\n        } else {\r\n          this.errors.entity_id = Helper.getError(data.data, \"entity_id\")\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loading = false\r\n      })\r\n    },\r\n    deleteIt() {\r\n      this.loading = true\r\n      fetch(Helper.route('formular-participants/'+this.participant.id), Helper.requestOptions(\"DELETE\"))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.text()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        this.doesDeleteOpen = false\r\n        if (this.status == 204) {\r\n          this.formular.formular_participants = this.formular.formular_participants.filter(i => i.id !== this.participant.id)\r\n          Swal.fire(\"Participant supprimer !\", \"Le participant a été supprimé avec succès.\", \"success\");\r\n        } else {\r\n          Swal.fire(\"Participant non supprimer ?\", \"La suppression n'a pas marché, veuillez réessayez plus tard.\", \"error\");\r\n        }\r\n      })\r\n    },\r\n    initItem(formular_quiz, action=\"edit\") {\r\n      this.formular_quiz = formular_quiz\r\n      this.quiz = formular_quiz.quiz\r\n      console.log('init', this.formular_quiz);\r\n      if (action == \"delete\") {\r\n        this.doesDeleteOpen = true\r\n      } else {\r\n        this.doesEditOpen = true\r\n      }\r\n    },\r\n    initParticiant(participant, action=\"edit\") {\r\n      this.participant = participant\r\n      if (action == \"delete\") {\r\n        this.doesDeleteOpen = true\r\n      } else {\r\n        this.doesEditOpen = true\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id\r\n    this.getItem()\r\n    this.loadEntities()\r\n  },\r\n  watch: {\r\n    doesAddOpen: function() {\r\n      this.errors = []\r\n    },\r\n    doesAddOpen1: function() {\r\n      this.errors = []\r\n      let selected_ids = this.formular.formular_participants.map(participant => participant.entity.id)\r\n      for (let i = 0; i < selected_ids.length; i++) {  \r\n        this.entities = this.entities.filter(i1 => i1.id !== selected_ids[i])\r\n      }\r\n    },\r\n    doesDeleteOpen: function() {\r\n      if (!this.doesDeleteOpen) {\r\n        this.formular_quiz = null\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n    \r\n    <div class=\"hstack mb-3\" v-if=\"formular.is_published == false\">\r\n        <div class=\"ms-auto\">\r\n            <div v-if=\"formular.formular_quizzes.length != 0\">\r\n                <b-button variant=\"success\" v-if=\"!loadingPublish\" @click=\"publishFormular()\" class=\"ms-auto\">\r\n                    <i class=\"bx bx-send font-size-16 align-middle me-2\"></i>\r\n                    Publier le formulaire\r\n                </b-button>\r\n                <div class=\"text-center\" v-else>\r\n                    <div class=\"spinner-border text-primary\" role=\"status\">\r\n                        <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <b-button variant=\"primary\" class=\"ms-3\" @click=\"doesAddOpen = true\">\r\n            <i class=\"bx bx-plus font-size-16 align-middle me-2\"></i>\r\n            Ajouter une nouvelle question\r\n        </b-button>\r\n        <b-button variant=\"primary\" class=\"ms-3\" @click=\"doesAddOpen1 = true\">\r\n            <i class=\"bx bx-plus font-size-16 align-middle me-2\"></i>\r\n            Ajouter des participants\r\n        </b-button>\r\n    </div>\r\n    \r\n    \r\n    <div class=\"row\" v-if=\"formular != {}\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title\">{{ formular.name }}</h4>\r\n            <p class=\"text-danger mb-2\">\r\n                Date de Fin : {{ formular.date }}\r\n            </p>\r\n            <p class=\"card-title-desc\">\r\n              {{ formular.description }}\r\n            </p>\r\n            \r\n            <div class=\"bg-light p-3 pt-3\">\r\n                <h6 class=\"font-20 text-danger\">♣ Listes des questions</h6>\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table align-middle mb-0\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Question</th>\r\n                                <th class=\"text-center\">Réponse</th>\r\n                                <th>Date d'ajout</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr v-for=\"(formular_quiz, i) in formular.formular_quizzes\" :key=\"formular_quiz.id\">\r\n                                <th scope=\"row\">{{ i + 1 }}</th>\r\n                                <td>\r\n                                    <router-link :to=\"'/cdn/formulars/'+formular_quiz.id+'/responses'\">{{ formular_quiz.quiz }}</router-link>\r\n                                </td>\r\n                                <td class=\"text-center\">{{ formular_quiz.formular_responses.length }}</td>\r\n                                <td>{{ formular_quiz.created_at }}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"bg-light p-3 mt-4 pt-3\">\r\n                <h6 class=\"font-20 text-danger\">♣ Listes des participants</h6>\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table table-bordered table-striped align-middle mb-0\">\r\n                        <thead>\r\n                          <tr>\r\n                              <th>#</th>\r\n                              <th>Nom du participant</th>\r\n                              <th v-if=\"!formular.is_published\">Action</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          <tr v-for=\"(participant, i) in formular.formular_participants\" :key=\"participant.id\">\r\n                              <th scope=\"row\">{{ i + 1 }}</th>\r\n                              <td>\r\n                                  <router-link :to=\"'/cdn/patners/'+participant.entity.id\" v-if=\"participant.entity.type == 'PATNER'\">{{ participant.entity.name }}</router-link>\r\n                                  <router-link :to=\"'/cdn/sectors/'+participant.entity.id\" v-else>{{ participant.entity.name }}</router-link>\r\n                              </td>\r\n                              <td v-if=\"!formular.is_published\" class=\"hstack\">\r\n                                  <b-button variant=\"danger\" @click=\"initParticiant(participant, 'delete')\" class=\"ms-2 btn-sm\">\r\n                                      <i class=\"bx bx-trash font-size-16 align-middle mx-1\"></i>\r\n                                  </b-button>\r\n                              </td>\r\n                          </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ADD MODAL -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen\"\r\n        id=\"modal-center\"\r\n        centered\r\n        title=\"Ajouter une question\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <form @submit.prevent=\"addItem()\">\r\n          <div>\r\n            <label for=\"\">Question</label>\r\n            <input type=\"text\" required v-model=\"quiz\" class=\"form-control\">\r\n            <span class=\"text-danger mt-2\" v-if=\"errors.quiz\">{{ errors.quiz }}</span>\r\n          </div>\r\n          <div class=\"mt-3\" v-if=\"!loading\">\r\n            <input type=\"submit\" value=\"Enregistrer\" class=\"btn btn-primary\">\r\n          </div>\r\n          <div class=\"mt-3 text-center\" v-else>\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n    \r\n    <!-- ADD PARTICIPANT -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen1\"\r\n        id=\"modal-center\"\r\n        centered\r\n        title=\"Ajouter une participant\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <form @submit.prevent=\"addParticipant()\">\r\n          <div>\r\n            <label for=\"\">Selectionnez l'entité</label>\r\n            <select required multiple v-model=\"entity_id\" class=\"form-control\">\r\n                <template v-for=\"entity in entities\" :key=\"entity.id\">\r\n                  <option :value=\"entity.id\">{{ entity.name }}</option>\r\n                </template>\r\n            </select>\r\n            <span class=\"text-danger mt-2\" v-if=\"errors.entity_id\">{{ errors.entity_id }}</span>\r\n          </div>\r\n          <div class=\"mt-3\" v-if=\"!loading\">\r\n            <input type=\"submit\" value=\"Enregistrer\" class=\"btn btn-primary\">\r\n          </div>\r\n          <div class=\"mt-3 text-center\" v-else>\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n\r\n\r\n    <!-- DELETE MODAL -->\r\n    <b-modal\r\n        v-model=\"doesDeleteOpen\"\r\n        id=\"modal-center\"\r\n        title=\"Supprimer la participant\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <p class=\"mb-2\">\r\n            Voulez-vous vraiment supprimer le participant ?\r\n        </p>\r\n        <div class=\"hstack mt-2\" v-if=\"!loading\">\r\n          <button class=\"btn btn-dark ms-auto\" @click=\"doesDeleteOpen = false\">Annuler</button>\r\n          <button class=\"ms-3 btn btn-danger\" @click=\"deleteIt()\">Supprimer</button>\r\n        </div>\r\n        <div class=\"text-center\" v-else>\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n    </b-modal>\r\n\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./show.vue?vue&type=template&id=c1d18798\"\nimport script from \"./show.vue?vue&type=script&lang=js\"\nexport * from \"./show.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}