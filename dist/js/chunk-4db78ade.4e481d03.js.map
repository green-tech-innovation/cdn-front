{"version":3,"sources":["webpack:///./src/components/page-header.vue","webpack:///./src/components/page-header.vue?c94a","webpack:///./src/router/views/pages/cdn/chat/index.vue","webpack:///./src/router/views/pages/cdn/chat/index.vue?c005"],"names":["class","title","items","components","props","type","String","default","Array","__exports__","render","style","role","id","aria-valuenow","aria-valuemin","aria-valuemax","loadList","loadingList","messages","message","key","entity_id","entity","name","file","href","STORAGE_URL","target","created_at","addItem","$refs","click","hidden","accept","onFileChange","ref","placeholder","rows","loading","disabled","length","doesAddOpen","centered","title-class","hide-footer","setup","page","meta","content","description","Layout","PageHeader","data","text","active","localStorage","getItem","status","methods","this","fetch","route","requestOptions","then","response","tokenChecker","json","console","log","setTimeout","updateScroll","catch","error","formData","FormData","append","push","getError","e","files","undefined","element","document","getElementById","scrollTop","scrollHeight","mounted"],"mappings":"mIAoBOA,MAAM,O,GACJA,MAAM,U,GACJA,MAAM,oE,GACLA,MAAM,qB,GAELA,MAAM,oB,4GALjB,gCAUM,MAVN,EAUM,CATJ,gCAQM,MARN,EAQM,CAPJ,gCAMM,MANN,EAMM,CALJ,gCAA8C,KAA9C,EAA8C,6BAAb,EAAAC,OAAK,GAEtC,gCAEM,MAFN,EAEM,CADJ,yBAAwD,GAAzCC,MAAO,EAAAA,MAAOF,MAAM,O,0BAzB9B,OACbG,WAAY,GACZC,MAAO,CACLH,MAAO,CACLI,KAAMC,OACNC,QAAS,IAEXL,MAAO,CACLG,KAAMG,MACND,QAAS,WACP,MAAO,O,qBCNf,MAAME,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,U,wEC+INV,MAAM,W,GAEFA,MAAM,wB,SAEDK,KAAK,U,SACNL,MAAM,0B,EACT,gCAEM,OAFDA,MAAM,4BAA4BW,MAAA,6BAAmCC,KAAK,U,CAC7E,gCAA+C,QAAzCZ,MAAM,mBAAkB,gB,MADhC,G,GAKCA,MAAM,OAAOW,MAAA,kB,GACXE,GAAG,WAAWb,MAAM,YAAYW,MAAA,sC,GAG7BX,MAAM,qB,GACPA,MAAM,Q,aAGH,gCAAwE,KAArEA,MAAM,4DAA0D,S,+BAAK,4B,GAAxE,E,MAIHA,MAAM,4B,GACJA,MAAM,kD,GAAuDA,MAAM,Q,GAYrEA,MAAM,S,GAGNA,MAAM,0B,iBAEP,gCAAyD,KAAtDA,MAAM,6CAA2C,S,+BAAK,a,GAAzD,E,YAGGA,MAAM,oB,EACT,gCAEM,OAFDA,MAAM,8BAA8BY,KAAK,U,CAC5C,gCAA+C,QAAzCZ,MAAM,mBAAkB,gB,MADhC,G,EAqBV,gCAUM,YARJ,gCAEM,OAFDA,MAAM,YAAU,CACnB,gCAA4K,OAAvKA,MAAM,0DAA0DY,KAAK,cAAcE,gBAAc,MAAMC,gBAAc,IAAIC,gBAAc,MAAML,MAAA,mBAGpJ,gCAEI,KAFDX,MAAM,oBAAmB,kE,kMA7EpC,yBAoFS,Q,8BAnFP,iBAA4C,CAA5C,yBAA4C,GAA/BC,MAAO,EAAAA,MAAQC,MAAO,EAAAA,O,0BAInC,gCAuDM,MAvDN,EAuDM,CAtDJ,gCAqDM,YApDJ,gCAmDM,MAnDN,EAmDM,CAlDJ,gCAOM,OAPDF,MAAM,wCAAyC,QAAK,+BAAE,EAAAiB,c,CAC9B,EAAAC,a,yBAC3B,gCAIM,MAJN,EAIM,K,yBALN,gCAAyE,OAAzE,EAAwC,iCAO1C,gCAyCM,MAzCN,EAyCM,CAxCJ,gCAiBM,MAjBN,EAiBM,E,2BAfJ,gCAYM,2CAZiB,EAAAC,UAAQ,SAAnBC,G,gCAAZ,gCAYM,OAZ4BC,IAAKD,EAAQP,GAAKb,MAAK,6BAAE,EAAAsB,WAAaF,EAAQG,OAAOV,GAAE,iBAA6B,wC,CACpH,gCAA4D,KAA5D,EAA4D,6BAA3BO,EAAQG,OAAOC,MAAI,GACpD,gCAMI,IANJ,EAMI,C,0DALCJ,EAAQA,SAAU,IACrB,GAA0CA,EAAQK,M,yBAAlD,gCAGM,K,MAHFC,KAAM,EAAAC,YAAYP,EAAQK,KAA0BG,OAAO,SAAS5B,MAAM,qC,iDAKhF,gCAEI,IAFJ,EAEI,CADF,gCAAgH,IAAhH,EAAgH,CAAtD,gCAAkD,OAAlD,EAAkD,6BAA5BoB,EAAQS,YAAU,Q,cAOxG,gCAmBO,QAnBA,SAAM,2DAAU,EAAAC,YAAO,cAAI9B,MAAM,cAAcW,MAAA,iB,CACpD,gCAGM,YAFJ,gCAAgG,KAA7FX,MAAM,wCAA0C,QAAK,+BAAE,EAAA+B,MAAMN,KAAKO,UAAS3B,KAAK,WACnF,gCAA+J,SAAxJA,KAAK,OAAO4B,OAAA,GAAOC,OAAO,iFAAkF,SAAM,8BAAE,EAAAC,cAAA,EAAAA,aAAA,qBAActB,GAAG,OAAOuB,IAAI,Q,YAEzJ,gCAEM,MAFN,EAEM,C,4BADJ,gCAAyG,YAA/FpC,MAAM,e,qDAAwB,EAAAoB,QAAO,IAAEiB,YAAY,wBAAwBC,KAAK,K,4BAAlD,EAAAlB,aAE1C,gCAUM,MAVN,EAUM,CATmE,EAAAmB,S,yBAIvE,gCAIM,MAJN,EAIM,K,yBARN,gCAGS,U,MAHAC,SAAwB,GAAd,EAAApB,QAAQqB,OAAazC,MAAM,mB,uBAmB1D,yBAkBU,G,WAjBG,EAAA0C,Y,qDAAA,EAAAA,YAAW,IACpB7B,GAAG,eACH8B,SAAA,GACAC,cAAY,UACZC,cAAA,I,+BAEA,iBAUM,CAVN,M,mHA5MO,GACXC,MADW,WAEP,IAAMJ,EAAc,kBAAI,GAExB,MAAO,CACLA,gBAGNK,KAAM,CACN9C,MAAO,aACP+C,KAAM,CACJ,CACExB,KAAM,cACNyB,QAAS,EAAUC,eAIzB/C,WAAY,CACVgD,OAAA,OACAC,WAAA,QAEFC,KArBa,WAsBX,MAAO,CACLpD,MAAO,cACPC,MAAO,CACL,CACEoD,KAAM,OACN5B,KAAM,KAER,CACE4B,KAAM,cACNC,QAAQ,IAGZjC,UAAWkC,aAAaC,QAAQ,aAChCtC,SAAU,GACVC,QAAS,GACTF,aAAa,EACbqB,SAAS,EACTmB,OAAQ,IACR/B,YAAa,OAAOA,cAGxBgC,QAAS,CACP1C,SADO,WACI,WACT2C,KAAK1C,aAAc,EACnB2C,MAAM,OAAOC,MAAM,YAAa,OAAOC,kBACtCC,MAAK,SAAAC,GAEF,OADA,OAAOC,aAAaD,EAASP,QACtBO,EAASE,UAEnBH,MAAK,SAAAX,GACJe,QAAQC,IAAIhB,EAAKA,MACjB,EAAKlC,SAAWkC,EAAKA,KACrB,EAAKnC,aAAc,EACnBoD,WAAW,EAAKC,aAAc,QAE/BC,OAAM,SAAAC,GACLL,QAAQC,IAAII,GACZ,EAAKvD,aAAc,MAGvBY,QAnBO,WAmBG,WACR8B,KAAKrB,SAAU,EACf,IAAImC,EAAW,IAAIC,SACnBD,EAASE,OAAO,UAAWhB,KAAKxC,SAChCyC,MAAM,OAAOC,MAAM,YAAa,OAAOC,eAAe,OAAQW,IAC7DV,MAAK,SAAAC,GAGF,OAFA,OAAOC,aAAaD,EAASP,QAC7B,EAAKA,OAASO,EAASP,OAChBO,EAASE,UAEnBH,MAAK,SAAAX,GACJe,QAAQC,IAAI,EAAKX,QACjBU,QAAQC,IAAIhB,GACZ,EAAKd,SAAU,EACI,KAAf,EAAKmB,QACP,EAAKtC,QAAU,GACf,EAAKD,SAAS0D,KAAKxB,EAAKA,MACxBiB,WAAW,EAAKC,aAAc,MAE9B,EAAKnD,QAAQI,KAAO,OAAOsD,SAASzB,EAAKA,KAAM,cAGlDmB,OAAM,SAAAC,GACLL,QAAQC,IAAII,GACZ,EAAKlC,SAAU,MAGnBJ,aA9CO,SA8CM4C,GAAG,WACVtD,EAAOsD,EAAEnD,OAAOoD,MAAM,GAC1B,QAAYC,GAARxD,EAAmB,CACrBmC,KAAKlB,aAAc,EACnB,IAAIgC,EAAW,IAAIC,SACnBD,EAASE,OAAO,OAAQnD,GACxBoC,MAAM,OAAOC,MAAM,YAAa,OAAOC,eAAe,OAAQW,IAC7DV,MAAK,SAAAC,GAGF,OAFA,OAAOC,aAAaD,EAASP,QAC7B,EAAKA,OAASO,EAASP,OAChBO,EAASE,UAEnBH,MAAK,SAAAX,GACJe,QAAQC,IAAI,EAAKX,QACjBU,QAAQC,IAAIhB,GACO,KAAf,EAAKK,SACP,EAAKtC,QAAU,GAEfkD,YAAW,WACT,EAAK5B,aAAc,IAClB,KAEH,EAAKvB,SAAS0D,KAAKxB,EAAKA,MACxBiB,WAAW,EAAKC,aAAc,SAGjCC,OAAM,SAAAC,GACLL,QAAQC,IAAII,GACZ,EAAK/B,aAAc,OAIzB6B,aA9EO,WA+EL,IAAIW,EAAUC,SAASC,eAAe,YACtCF,EAAQG,UAAYH,EAAQI,eAGhCC,QA9Ha,WA+HX3B,KAAK3C,a,qBCtIT,MAAMR,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-4db78ade.4e481d03.js","sourcesContent":["<script>\nexport default {\n  components: {},\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n    items: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n  },\n}\n</script>\n\n<template>\n  <!-- start page title -->\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"page-title-box d-flex align-items-center justify-content-between\">\n        <h4 class=\"mb-0 font-size-18\">{{ title }}</h4>\n\n        <div class=\"page-title-right\">\n          <b-breadcrumb :items=\"items\" class=\"m-0\"></b-breadcrumb>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- end page title -->\n</template>\n","import { render } from \"./page-header.vue?vue&type=template&id=e08f28f6\"\nimport script from \"./page-header.vue?vue&type=script&lang=js\"\nexport * from \"./page-header.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\nimport { ref } from \"vue\";\r\n\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n    setup() {\r\n        const doesAddOpen = ref(false);\r\n\r\n        return {\r\n          doesAddOpen,\r\n        };\r\n    },\r\n    page: {\r\n    title: \"Categories\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Discussions\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Discussions\",\r\n          active: true,\r\n        },\r\n      ],\r\n      entity_id: localStorage.getItem('entity_id'),\r\n      messages: [],\r\n      message: \"\",\r\n      loadingList: false,\r\n      loading: false,\r\n      status: 201,\r\n      STORAGE_URL: Helper.STORAGE_URL,\r\n    };\r\n  },\r\n  methods: {\r\n    loadList() {\r\n      this.loadingList = true\r\n      fetch(Helper.route('messages'), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(data.data);\r\n        this.messages = data.data\r\n        this.loadingList = false\r\n        setTimeout(this.updateScroll, 100);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loadingList = false\r\n      })\r\n    },\r\n    addItem() {\r\n      this.loading = true\r\n      let formData = new FormData()\r\n      formData.append('message', this.message)\r\n      fetch(Helper.route('messages'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        if (this.status == 200) {\r\n          this.message = \"\"\r\n          this.messages.push(data.data)\r\n          setTimeout(this.updateScroll, 100);\r\n        } else {\r\n          this.message.name = Helper.getError(data.data, \"message\")\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loading = false\r\n      })\r\n    },\r\n    onFileChange(e) {\r\n      let file = e.target.files[0];\r\n      if (file != undefined) {\r\n        this.doesAddOpen = true\r\n        let formData = new FormData()\r\n        formData.append('file', file)\r\n        fetch(Helper.route('messages'), Helper.requestOptions(\"POST\", formData))\r\n        .then(response => {\r\n            Helper.tokenChecker(response.status)\r\n            this.status = response.status\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n          console.log(this.status);\r\n          console.log(data);\r\n          if (this.status == 200) {\r\n            this.message = \"\"\r\n\r\n            setTimeout(() => {\r\n              this.doesAddOpen = false\r\n            }, 100);\r\n\r\n            this.messages.push(data.data)\r\n            setTimeout(this.updateScroll, 100);\r\n          } \r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          this.doesAddOpen = false\r\n        })\r\n      }\r\n    },\r\n    updateScroll() {\r\n      var element = document.getElementById(\"messages\");\r\n      element.scrollTop = element.scrollHeight;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadList()\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n\r\n    \r\n    \r\n    <div class=\"bg-dark\">\r\n      <div>\r\n        <div class=\"bg-white rounded p-0\">\r\n          <div class=\"bg-primary text-white text-center p-2\" @click=\"loadList()\">\r\n            <span type=\"button\" v-if=\"!loadingList\">Synchroniser la discussion</span>\r\n            <div class=\"fs-5 w-100 text-center\" v-else>\r\n              <div class=\"spinner-border text-white\" style=\"height: 25px; width: 25px;\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"px-3\" style=\"height: 430px;\">            \r\n            <div id=\"messages\" class=\"pe-3 pb-3\" style=\"height: 350px; overflow-y: auto;\">\r\n              \r\n              <div v-for=\"message in messages\" :key=\"message.id\" :class=\"entity_id == message.entity.id ? 'offset-md-6' : ''\" class=\"col-md-6 p-3 bg-light mt-2 rounded\">\r\n                <h5 class=\"text-primary fs-6\">{{ message.entity.name }}</h5>\r\n                <p class=\"mb-2\">\r\n                  {{ message.message }}\r\n                  <a :href=\"STORAGE_URL+message.file\" v-if=\"message.file\" target=\"_blank\" class=\"btn btn-primary px-3 rounded-pill\">\r\n                      <i class=\"bx bx-download font-size-16 align-middle mx-1 text-white\"></i>\r\n                      Télécharger le Fichier\r\n                    </a>\r\n                </p>\r\n                <p class=\"mb-0 font-size-13 hstack\">\r\n                  <i class=\"bx bx-time font-size-14 align-middle mx-1 mt-2\"><span class=\"px-1\">{{ message.created_at }}</span></i>\r\n                </p>\r\n              </div>\r\n              \r\n              \r\n            </div>\r\n\r\n            <form @submit.prevent=\"addItem()\" class=\"hstack py-1\" style=\"height: 80px;\">\r\n              <div>\r\n                <i class=\"bx bx-file fs-3 text-primary mx-2 p-2\"  @click=\"$refs.file.click()\" type=\"button\"></i>\r\n                <input type=\"file\" hidden accept=\".png, .jpg, jpeg, .csv, .xlsx, .pdf, .doc, .docx, .zip, .rar, .mp4, .mp3, .avi\" @change=\"onFileChange\" id=\"file\" ref=\"file\" >\r\n              </div>\r\n              <div class=\"w-100\">\r\n                <textarea class=\"form-control\" v-model=\"message\" placeholder=\"Ecrivez votre message\" rows=\"2\"></textarea>\r\n              </div>\r\n              <div class=\"px-2 col-1 text-center\">\r\n                <button :disabled=\"message.length == 0\" class=\"btn btn-primary\" v-if=\"!loading\">\r\n                  <i class=\"bx bx-send font-size-16 align-middle me-2\"></i>\r\n                  Envoyer\r\n                </button>\r\n                <div class=\"mt-3 text-center\" v-else>\r\n                  <div class=\"spinner-border text-primary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <!-- ADD MODAL -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen\"\r\n        id=\"modal-center\"\r\n        centered\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <div>\r\n          \r\n          <div class=\"progress\">\r\n            <div class=\"progress-bar progress-bar-striped progress-bar-animated\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 100%\"></div>\r\n          </div>\r\n\r\n          <p class=\"mt-3 text-center\">\r\n            Veuillez patienter le téléchargement du fichier du fichier\r\n          </p>\r\n\r\n        </div>\r\n    </b-modal>\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./index.vue?vue&type=template&id=178b12b8\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}