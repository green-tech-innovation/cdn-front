(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db78ade"],{2579:function(e,t,n){"use strict";var a=n("7a23"),s={class:"row"},c={class:"col-12"},o={class:"page-title-box d-flex align-items-center justify-content-between"},l={class:"mb-0 font-size-18"},i={class:"page-title-right"};function r(e,t,n,r,d,m){var u=Object(a["resolveComponent"])("b-breadcrumb");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",s,[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("h4",l,Object(a["toDisplayString"])(n.title),1),Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(u,{items:n.items,class:"m-0"},null,8,["items"])])])])])}var d={components:{},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}}},m=n("6b0d"),u=n.n(m);const b=u()(d,[["render",r]]);t["a"]=b},"6d65":function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),s={class:"bg-dark"},c={class:"bg-white rounded p-0"},o={key:0,type:"button"},l={key:1,class:"fs-5 w-100 text-center"},i=Object(a["createElementVNode"])("div",{class:"spinner-border text-white",style:{height:"25px",width:"25px"},role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),r=[i],d={class:"px-3",style:{height:"430px"}},m={id:"messages",class:"pe-3 pb-3",style:{height:"350px","overflow-y":"auto"}},u={class:"text-primary fs-6"},b={class:"mb-2"},p=["href"],g=Object(a["createElementVNode"])("i",{class:"bx bx-download font-size-16 align-middle mx-1 text-white"},null,-1),O=Object(a["createTextVNode"])(" Télécharger le Fichier "),f=[g,O],j={class:"mb-0 font-size-13 hstack"},h={class:"bx bx-time font-size-14 align-middle mx-1 mt-2"},v={class:"px-1"},E={class:"w-100"},x={class:"px-2 col-1 text-center"},V=["disabled"],y=Object(a["createElementVNode"])("i",{class:"bx bx-send font-size-16 align-middle me-2"},null,-1),k=Object(a["createTextVNode"])(" Envoyer "),N=[y,k],w={key:1,class:"mt-3 text-center"},B=Object(a["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),C=[B],S=Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",{class:"progress"},[Object(a["createElementVNode"])("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})]),Object(a["createElementVNode"])("p",{class:"mt-3 text-center"}," Veuillez patienter le téléchargement du fichier du fichier ")],-1);function L(e,t,n,i,g,O){var y=Object(a["resolveComponent"])("PageHeader"),k=Object(a["resolveComponent"])("b-modal"),B=Object(a["resolveComponent"])("Layout");return Object(a["openBlock"])(),Object(a["createBlock"])(B,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(y,{title:g.title,items:g.items},null,8,["title","items"]),Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",{class:"bg-primary text-white text-center p-2",onClick:t[0]||(t[0]=function(e){return O.loadList()})},[g.loadingList?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,r)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",o,"Synchroniser la discussion"))]),Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",m,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(g.messages,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:e.id,class:Object(a["normalizeClass"])([g.entity_id==e.entity.id?"offset-md-6":"","col-md-6 p-3 bg-light mt-2 rounded"])},[Object(a["createElementVNode"])("h5",u,Object(a["toDisplayString"])(e.entity.name),1),Object(a["createElementVNode"])("p",b,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.message)+" ",1),e.file?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:0,href:g.STORAGE_URL+e.file,target:"_blank",class:"btn btn-primary px-3 rounded-pill"},f,8,p)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("p",j,[Object(a["createElementVNode"])("i",h,[Object(a["createElementVNode"])("span",v,Object(a["toDisplayString"])(e.created_at),1)])])],2)})),128))]),Object(a["createElementVNode"])("form",{onSubmit:t[4]||(t[4]=Object(a["withModifiers"])((function(e){return O.addItem()}),["prevent"])),class:"hstack py-1",style:{height:"80px"}},[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("i",{class:"bx bx-file fs-3 text-primary mx-2 p-2",onClick:t[1]||(t[1]=function(t){return e.$refs.file.click()}),type:"button"}),Object(a["createElementVNode"])("input",{type:"file",hidden:"",accept:".png, .jpg, jpeg, .csv, .xlsx, .pdf, .doc, .docx, .zip, .rar, .mp4, .mp3, .avi",onChange:t[2]||(t[2]=function(){return O.onFileChange&&O.onFileChange.apply(O,arguments)}),id:"file",ref:"file"},null,544)]),Object(a["createElementVNode"])("div",E,[Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return g.message=e}),placeholder:"Ecrivez votre message",rows:"2"},null,512),[[a["vModelText"],g.message]])]),Object(a["createElementVNode"])("div",x,[g.loading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",w,C)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,disabled:0==g.message.length,class:"btn btn-primary"},N,8,V))])],32)])])])]),Object(a["createVNode"])(k,{modelValue:i.doesAddOpen,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.doesAddOpen=e}),id:"modal-center",centered:"","title-class":"font-18","hide-footer":""},{default:Object(a["withCtx"])((function(){return[S]})),_:1},8,["modelValue"])]})),_:1})}n("a4d3"),n("e01a"),n("d3b7");var T=n("444f"),A=n("c2a4"),_=n("2579"),z=n("e01f"),D={setup:function(){var e=Object(a["ref"])(!1);return{doesAddOpen:e}},page:{title:"Categories",meta:[{name:"description",content:A.description}]},components:{Layout:T["a"],PageHeader:_["a"]},data:function(){return{title:"Discussions",items:[{text:"Menu",href:"/"},{text:"Discussions",active:!0}],entity_id:localStorage.getItem("entity_id"),messages:[],message:"",loadingList:!1,loading:!1,status:201,STORAGE_URL:z["a"].STORAGE_URL}},methods:{loadList:function(){var e=this;this.loadingList=!0,fetch(z["a"].route("messages"),z["a"].requestOptions()).then((function(e){return z["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.messages=t.data,e.loadingList=!1,setTimeout(e.updateScroll,100)})).catch((function(t){console.log(t),e.loadingList=!1}))},addItem:function(){var e=this;this.loading=!0;var t=new FormData;t.append("message",this.message),fetch(z["a"].route("messages"),z["a"].requestOptions("POST",t)).then((function(t){return z["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.message="",e.messages.push(t.data),setTimeout(e.updateScroll,100)):e.message.name=z["a"].getError(t.data,"message")})).catch((function(t){console.log(t),e.loading=!1}))},onFileChange:function(e){var t=this,n=e.target.files[0];if(void 0!=n){this.doesAddOpen=!0;var a=new FormData;a.append("file",n),fetch(z["a"].route("messages"),z["a"].requestOptions("POST",a)).then((function(e){return z["a"].tokenChecker(e.status),t.status=e.status,e.json()})).then((function(e){console.log(t.status),console.log(e),200==t.status&&(t.message="",setTimeout((function(){t.doesAddOpen=!1}),100),t.messages.push(e.data),setTimeout(t.updateScroll,100))})).catch((function(e){console.log(e),t.doesAddOpen=!1}))}},updateScroll:function(){var e=document.getElementById("messages");e.scrollTop=e.scrollHeight}},mounted:function(){this.loadList()}},F=n("6b0d"),R=n.n(F);const U=R()(D,[["render",L]]);t["default"]=U}}]);
//# sourceMappingURL=chunk-4db78ade.4e481d03.js.map