(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217155"],{c4e3:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("a4d3"),c("e01a");var n=c("7a23"),o={key:0,class:"hstack mb-3"},r={class:"ms-auto"},a={key:0},l=Object(n["createElementVNode"])("i",{class:"bx bx-send font-size-16 align-middle me-2"},null,-1),i=Object(n["createTextVNode"])(" Toutes les activités ont été enregistrées "),s={key:1,class:"text-center"},d=Object(n["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(n["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),m=[d],u=Object(n["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),b=Object(n["createTextVNode"])(" Ajouter une nouvelle activité "),p={key:1,class:"row"},j={class:"col-lg-12"},O={class:"card"},f={class:"card-body"},v={class:"card-title text-primary mb-3"},h=Object(n["createElementVNode"])("b",null,"Fichier du projet",-1),E=Object(n["createTextVNode"])(" : "),V=["href"],g=Object(n["createElementVNode"])("i",{class:"bx bx-download font-size-14 align-middle mx-1 text-white"},null,-1),N=Object(n["createTextVNode"])(" Télécharger le Fichier "),k=[g,N],y=Object(n["createElementVNode"])("b",null,"Progression",-1),x=Object(n["createElementVNode"])("b",null,"Montant alloué",-1),B=Object(n["createElementVNode"])("b",null,"Date debut",-1),D=Object(n["createElementVNode"])("b",null,"Date Fin",-1),_=Object(n["createElementVNode"])("h6",null,[Object(n["createElementVNode"])("b",null,"Description")],-1),w={class:"card-title-desc"},C={class:"bg-light p-3 pt-3 mt-3"},S=Object(n["createElementVNode"])("h6",{class:"font-20 text-danger"},"♣ Listes des activités",-1),T={class:"table-responsive"},P={class:"table align-middle mb-0"},M=Object(n["createElementVNode"])("th",null,"#",-1),U=Object(n["createElementVNode"])("th",null,"Activité",-1),A=Object(n["createElementVNode"])("th",{class:"text-center"},"Progession",-1),L=Object(n["createElementVNode"])("th",{class:"text-center"},"Poids",-1),q=Object(n["createElementVNode"])("th",{class:"text-center"},"Montant alloué",-1),I={key:0},F={scope:"row"},z={key:1},R={class:"text-center"},G={class:"text-center"},H={class:"text-center text-black"},J={key:0,class:"hstack"},$=Object(n["createElementVNode"])("i",{class:"bx bx-edit font-size-16 align-middle mx-1"},null,-1),K=Object(n["createElementVNode"])("i",{class:"bx bx-trash font-size-16 align-middle mx-1"},null,-1),Q={class:"row"},W={class:"col-md-6 mb-3"},X=Object(n["createElementVNode"])("label",{for:""},"Nom de l'activité",-1),Y={key:0,class:"text-danger mt-2"},Z={class:"col-md-6"},ee=Object(n["createElementVNode"])("label",{for:""},"Fichier explicatif (Facultatif)",-1),te=Object(n["createElementVNode"])("input",{type:"file",id:"file",accept:".pdf, .docx",class:"form-control"},null,-1),ce={key:0,class:"text-danger mt-2"},ne={class:"col-md-6 mb-3"},oe=Object(n["createElementVNode"])("label",{for:""},"Poids de l'activité (Le cumul des poids doit être = 100)",-1),re={key:0,class:"text-danger mt-2"},ae={class:"col-md-6 mb-3"},le=Object(n["createElementVNode"])("label",{for:""},"Montant alloué à l'activité",-1),ie={key:0,class:"text-danger mt-2"},se={class:"col-md-6 mb-3"},de=Object(n["createElementVNode"])("label",{for:""},"Date de debut de l'activité",-1),me={key:0,class:"text-danger mt-2"},ue={class:"col-md-6 mb-3"},be=Object(n["createElementVNode"])("label",{for:""},"Date de fin de l'activité",-1),pe={key:0,class:"text-danger mt-2"},je=Object(n["createElementVNode"])("label",{for:""},"Description de l'activité",-1),Oe={key:0,class:"text-danger mt-2"},fe={key:0,class:"mt-3"},ve=Object(n["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),he=[ve],Ee={key:1,class:"mt-3 text-center"},Ve=Object(n["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(n["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),ge=[Ve],Ne={class:"row"},ke={class:"col-md-6 mb-3"},ye=Object(n["createElementVNode"])("label",{for:""},"Nom de l'activité",-1),xe={key:0,class:"text-danger mt-2"},Be={class:"col-md-6"},De=Object(n["createElementVNode"])("label",{for:""},"Fichier explicatif (Facultatif)",-1),_e=Object(n["createElementVNode"])("input",{type:"file",id:"file1",accept:".pdf, .docx",class:"form-control"},null,-1),we={key:0,class:"text-danger mt-2"},Ce={class:"col-md-6 mb-3"},Se=Object(n["createElementVNode"])("label",{for:""},"Poids de l'activité (Le cumul des poids doit être = 100)",-1),Te={key:0,class:"text-danger mt-2"},Pe={class:"col-md-6 mb-3"},Me=Object(n["createElementVNode"])("label",{for:""},"Montant alloué à l'activité",-1),Ue={key:0,class:"text-danger mt-2"},Ae={class:"col-md-6 mb-3"},Le=Object(n["createElementVNode"])("label",{for:""},"Date de debut de l'activité",-1),qe={key:0,class:"text-danger mt-2"},Ie={class:"col-md-6 mb-3"},Fe=Object(n["createElementVNode"])("label",{for:""},"Date de fin de l'activité",-1),ze={key:0,class:"text-danger mt-2"},Re=Object(n["createElementVNode"])("label",{for:""},"Description de l'activité",-1),Ge={key:0,class:"text-danger mt-2"},He={key:0,class:"mt-3"},Je=Object(n["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),$e=[Je],Ke={key:1,class:"mt-3 text-center"},Qe=Object(n["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(n["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),We=[Qe],Xe={class:"mb-2"},Ye=Object(n["createTextVNode"])(" Voulez-vous vraiment supprimer l'activité "),Ze=Object(n["createTextVNode"])(" ? "),et={key:0,class:"hstack mt-2"},tt={key:1,class:"text-center"},ct=Object(n["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(n["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),nt=[ct];function ot(e,t,c,d,g,N){var ve=Object(n["resolveComponent"])("PageHeader"),Ve=Object(n["resolveComponent"])("b-button"),Je=Object(n["resolveComponent"])("b-progress"),Qe=Object(n["resolveComponent"])("router-link"),ct=Object(n["resolveComponent"])("b-modal"),ot=Object(n["resolveComponent"])("Layout");return Object(n["openBlock"])(),Object(n["createBlock"])(ot,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ve,{title:g.title,items:g.items},null,8,["title","items"]),0==g.project.activity_is_add?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",r,[0==g.project.activity_is_add?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[g.loadingPublish?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",s,m)):(Object(n["openBlock"])(),Object(n["createBlock"])(Ve,{key:0,variant:"success",onClick:t[0]||(t[0]=function(e){return N.publishProject()}),class:"ms-auto"},{default:Object(n["withCtx"])((function(){return[l,i]})),_:1}))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(Ve,{variant:"primary",class:"ms-3",onClick:t[1]||(t[1]=function(e){return d.doesAddOpen=!0})},{default:Object(n["withCtx"])((function(){return[u,b]})),_:1})])):Object(n["createCommentVNode"])("",!0),g.project.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("h4",v,Object(n["toDisplayString"])(g.project.name),1),Object(n["createElementVNode"])("p",null,[h,E,g.project.file?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:0,href:g.STORAGE_URL+g.project.file,target:"_blank",class:"btn btn-sm btn-success rounded-pill"},k,8,V)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("p",null,[y,Object(n["createTextVNode"])(" : "+Object(n["toDisplayString"])(g.project.progress)+"% ",1),Object(n["createVNode"])(Je,{value:g.project.progress,max:100,class:"mt-2",variant:"success"},null,8,["value"])]),Object(n["createElementVNode"])("p",null,[x,Object(n["createTextVNode"])(" : "+Object(n["toDisplayString"])(g.project.cost)+" F CFA",1)]),Object(n["createElementVNode"])("p",null,[B,Object(n["createTextVNode"])(" : "+Object(n["toDisplayString"])(g.project.date_start),1)]),Object(n["createElementVNode"])("p",null,[D,Object(n["createTextVNode"])(" : "+Object(n["toDisplayString"])(g.project.date_end),1)]),_,Object(n["createElementVNode"])("p",w,Object(n["toDisplayString"])(g.project.description),1),Object(n["createElementVNode"])("div",C,[S,Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("table",P,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[M,U,A,L,q,0==g.project.activity_is_add?(Object(n["openBlock"])(),Object(n["createElementBlock"])("th",I,"Action")):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(g.project.activities,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("th",F,Object(n["toDisplayString"])(t+1),1),Object(n["createElementVNode"])("td",null,[g.project.activity_is_add?(Object(n["openBlock"])(),Object(n["createBlock"])(Qe,{key:0,to:"/sector/activities/"+e.id},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",z,Object(n["toDisplayString"])(e.name),1))]),Object(n["createElementVNode"])("td",R,Object(n["toDisplayString"])(e.progress)+" %",1),Object(n["createElementVNode"])("td",G,Object(n["toDisplayString"])(e.weight),1),Object(n["createElementVNode"])("td",H,Object(n["toDisplayString"])(e.amount)+" F",1),0==g.project.activity_is_add?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",J,[Object(n["createVNode"])(Ve,{class:"btn-sm",onClick:function(t){return N.initItem(e)},variant:"success"},{default:Object(n["withCtx"])((function(){return[$]})),_:2},1032,["onClick"]),Object(n["createVNode"])(Ve,{variant:"danger",onClick:function(t){return N.initItem(e,"delete")},class:"ms-2 btn-sm"},{default:Object(n["withCtx"])((function(){return[K]})),_:2},1032,["onClick"])])):Object(n["createCommentVNode"])("",!0)])})),128))])])])])])])])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(ct,{modelValue:d.doesAddOpen,"onUpdate:modelValue":t[9]||(t[9]=function(e){return d.doesAddOpen=e}),id:"modal-center",centered:"",size:"lg",title:"Ajouter une activité","title-class":"font-18","hide-footer":""},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("form",{onSubmit:t[8]||(t[8]=Object(n["withModifiers"])((function(e){return N.addItem()}),["prevent"]))},[Object(n["createElementVNode"])("div",Q,[Object(n["createElementVNode"])("div",W,[X,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return g.name=e}),class:"form-control"},null,512),[[n["vModelText"],g.name]]),g.errors.name?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Y,Object(n["toDisplayString"])(g.errors.name),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Z,[ee,te,g.errors.file?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ce,Object(n["toDisplayString"])(g.errors.file),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",ne,[oe,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",required:"",min:"1",max:"100","onUpdate:modelValue":t[3]||(t[3]=function(e){return g.weight=e}),class:"form-control"},null,512),[[n["vModelText"],g.weight]]),g.errors.weight?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",re,Object(n["toDisplayString"])(g.errors.weight),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",ae,[le,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",required:"","onUpdate:modelValue":t[4]||(t[4]=function(e){return g.amount=e}),class:"form-control"},null,512),[[n["vModelText"],g.amount]]),g.errors.amount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ie,Object(n["toDisplayString"])(g.errors.amount),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",se,[de,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"date",required:"","onUpdate:modelValue":t[5]||(t[5]=function(e){return g.date_start=e}),class:"form-control"},null,512),[[n["vModelText"],g.date_start]]),g.errors.date_start?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",me,Object(n["toDisplayString"])(g.errors.date_start),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",ue,[be,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"date",required:"","onUpdate:modelValue":t[6]||(t[6]=function(e){return g.date_end=e}),class:"form-control"},null,512),[[n["vModelText"],g.date_end]]),g.errors.date_end?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",pe,Object(n["toDisplayString"])(g.errors.date_end),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",null,[je,Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return g.description=e}),required:"",class:"form-control",rows:"4"},null,512),[[n["vModelText"],g.description]]),g.errors.description?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Oe,Object(n["toDisplayString"])(g.errors.description),1)):Object(n["createCommentVNode"])("",!0)])]),g.loading?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ee,ge)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",fe,he))],32)]})),_:1},8,["modelValue"]),Object(n["createVNode"])(ct,{modelValue:d.doesEditOpen,"onUpdate:modelValue":t[17]||(t[17]=function(e){return d.doesEditOpen=e}),id:"modal-center",centered:"",size:"lg",title:"Modifier le sondage","title-class":"font-18","hide-footer":""},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("form",{onSubmit:t[16]||(t[16]=Object(n["withModifiers"])((function(e){return N.editItem()}),["prevent"]))},[Object(n["createElementVNode"])("div",Ne,[Object(n["createElementVNode"])("div",ke,[ye,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[10]||(t[10]=function(e){return g.name=e}),class:"form-control"},null,512),[[n["vModelText"],g.name]]),g.errors.name?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",xe,Object(n["toDisplayString"])(g.errors.name),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Be,[De,_e,g.errors.file?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",we,Object(n["toDisplayString"])(g.errors.file),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ce,[Se,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",required:"",min:"1",max:"100","onUpdate:modelValue":t[11]||(t[11]=function(e){return g.weight=e}),class:"form-control"},null,512),[[n["vModelText"],g.weight]]),g.errors.weight?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Te,Object(n["toDisplayString"])(g.errors.weight),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Pe,[Me,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",required:"","onUpdate:modelValue":t[12]||(t[12]=function(e){return g.amount=e}),class:"form-control"},null,512),[[n["vModelText"],g.amount]]),g.errors.amount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ue,Object(n["toDisplayString"])(g.errors.amount),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ae,[Le,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"date",required:"","onUpdate:modelValue":t[13]||(t[13]=function(e){return g.date_start=e}),class:"form-control"},null,512),[[n["vModelText"],g.date_start]]),g.errors.date_start?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",qe,Object(n["toDisplayString"])(g.errors.date_start),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ie,[Fe,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"date",required:"","onUpdate:modelValue":t[14]||(t[14]=function(e){return g.date_end=e}),class:"form-control"},null,512),[[n["vModelText"],g.date_end]]),g.errors.date_end?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ze,Object(n["toDisplayString"])(g.errors.date_end),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",null,[Re,Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{"onUpdate:modelValue":t[15]||(t[15]=function(e){return g.description=e}),required:"",class:"form-control",rows:"4"},null,512),[[n["vModelText"],g.description]]),g.errors.description?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ge,Object(n["toDisplayString"])(g.errors.description),1)):Object(n["createCommentVNode"])("",!0)])]),g.loading?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ke,We)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",He,$e))],32)]})),_:1},8,["modelValue"]),Object(n["createVNode"])(ct,{modelValue:d.doesDeleteOpen,"onUpdate:modelValue":t[20]||(t[20]=function(e){return d.doesDeleteOpen=e}),id:"modal-center",title:"Supprimer l'activité","title-class":"font-18","hide-footer":""},{default:Object(n["withCtx"])((function(){var e;return[Object(n["createElementVNode"])("p",Xe,[Ye,Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(null===(e=g.activity)||void 0===e?void 0:e.name),1),Ze]),g.loading?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",tt,nt)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",et,[Object(n["createElementVNode"])("button",{class:"btn btn-dark ms-auto",onClick:t[18]||(t[18]=function(e){return d.doesDeleteOpen=!1})},"Annuler"),Object(n["createElementVNode"])("button",{class:"ms-3 btn btn-danger",onClick:t[19]||(t[19]=function(e){return N.deleteIt()})},"Supprimer")]))]})),_:1},8,["modelValue"])]})),_:1})}c("d3b7"),c("a15b"),c("d81d"),c("4de4");var rt=c("3d20"),at=c.n(rt),lt=c("444f"),it=c("c2a4"),st=c("2579"),dt=c("e01f"),mt={setup:function(){var e=Object(n["ref"])(!1),t=Object(n["ref"])(!1),c=Object(n["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:c}},page:{title:"Projets",meta:[{name:"description",content:it.description}]},components:{Layout:lt["a"],PageHeader:st["a"]},data:function(){return{title:"Projet",items:[{text:"Menu",href:"/"},{text:"Projet",active:!0},{text:"Un projet",active:!0}],errors:[],id:"",name:"",description:"",weight:1,amount:"",date_start:"",date_end:"",project:{},activity:{},loading:!1,loadingPublish:!1,status:201,STORAGE_URL:dt["a"].STORAGE_URL}},methods:{getItem:function(){var e=this;fetch(dt["a"].route("sector/projects/"+this.id),dt["a"].requestOptions()).then((function(e){return dt["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.project=t.data}))},publishProject:function(){var e=this;this.loadingPublish=!0,fetch(dt["a"].route("sector/projects/"+this.id+"/publish"),dt["a"].requestOptions()).then((function(e){return dt["a"].tokenChecker(e.status),e.json()})).then((function(t){e.loadingPublish=!1,console.log(t),0==t.status?at.a.fire("Activités non envoyées au CDN !",t.message.join(";"),"error"):(e.project=t.data,at.a.fire("Activités publiées !","Les activités sont déjà envoyé au CDN","success"))}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("project_id",this.id),t.append("name",this.name),t.append("description",this.description),t.append("amount",this.amount),t.append("weight",this.weight),t.append("date_start",this.date_start),t.append("date_end",this.date_end),void 0!=document.getElementById("file").files[0]&&t.append("file",document.getElementById("file").files[0]),fetch(dt["a"].route("sector/activities"),dt["a"].requestOptions("POST",t)).then((function(t){return dt["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.doesAddOpen=!1,e.initData(null),e.project.activities.push(t.data),at.a.fire("Activité ajouter !","L'activité a été enregistrée avec succès.","success")):(e.errors.name=dt["a"].getError(t.data,"name"),e.errors.description=dt["a"].getError(t.data,"description"),e.errors.amount=dt["a"].getError(t.data,"amount"),e.errors.weight=dt["a"].getError(t.data,"weight"),e.errors.date_start=dt["a"].getError(t.data,"date_start"),e.errors.date_end=dt["a"].getError(t.data,"date_end"),e.errors.file=dt["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},editItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("project_id",this.id),t.append("name",this.name),t.append("description",this.description),t.append("amount",this.amount),t.append("weight",this.weight),t.append("date_start",this.date_start),t.append("date_end",this.date_end),void 0!=document.getElementById("file1").files[0]&&t.append("file",document.getElementById("file1").files[0]),t.append("_method","PUT"),console.log(t.get("name"),"id",this.activity.id),fetch(dt["a"].route("sector/activities/"+this.activity.id),dt["a"].requestOptions("POST",t)).then((function(t){return dt["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),e.loading=!1,200==e.status?(e.doesEditOpen=!1,e.project.activities=e.project.activities.map((function(c){return c.id!==e.activity.id?c:t.data})),at.a.fire("Activité modifier !","L'activité a été modifiée avec succès.","success")):(e.errors.name=dt["a"].getError(t.data,"name"),e.errors.description=dt["a"].getError(t.data,"description"),e.errors.amount=dt["a"].getError(t.data,"amount"),e.errors.weight=dt["a"].getError(t.data,"weight"),e.errors.date_start=dt["a"].getError(t.data,"date_start"),e.errors.date_end=dt["a"].getError(t.data,"date_end"),e.errors.file=dt["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},deleteIt:function(){var e=this;this.loading=!0,console.log(this.activity.id),fetch(dt["a"].route("sector/activities/"+this.activity.id),dt["a"].requestOptions("DELETE")).then((function(t){return dt["a"].tokenChecker(t.status),e.status=t.status,t.text()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,e.doesDeleteOpen=!1,204==e.status?(e.project.activities=e.project.activities.filter((function(t){return t.id!==e.activity.id})),at.a.fire("Partenaire supprimer !","Le partenaire a été supprimé avec succès.","success")):at.a.fire("Partenaire non supprimer ?","La suppression n'a pas marché, veuillez réessayez plus tard.","error"),e.activity=null}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.activity=e,this.initData(e),"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0},initData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.name=null!=e?e.name:"",this.amount=null!=e?e.amount:"",this.weight=null!=e?e.weight:"",this.date_start=null!=e?e.date_start:"",this.date_end=null!=e?e.date_end:"",this.description=null!=e?e.description:""}},mounted:function(){this.id=this.$route.params.id,this.getItem()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.activity=null,this.initData(null))},doesDeleteOpen:function(){this.doesDeleteOpen||(this.activity=null,this.initData(null))}}},ut=c("6b0d"),bt=c.n(ut);const pt=bt()(mt,[["render",ot]]);t["default"]=pt}}]);
//# sourceMappingURL=chunk-2d217155.f92e0178.js.map