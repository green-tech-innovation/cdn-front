(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bb21d"],{"39bc":function(e,t,r){"use strict";r.r(t);r("b0c0");var o=r("7a23"),c={class:"hstack mb-3"},n=Object(o["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),l=Object(o["createTextVNode"])(" Ajouter un nouveau "),a={class:"row"},s={class:"col-lg-12"},i={class:"card"},d={class:"card-body"},u=Object(o["createElementVNode"])("h4",{class:"card-title"},"Listes des courriers",-1),m=Object(o["createElementVNode"])("p",{class:"card-title-desc"},[Object(o["createTextVNode"])(" Le tableau ci-dessous présente la listes des "),Object(o["createElementVNode"])("code",null,"courriers"),Object(o["createTextVNode"])(". ")],-1),b={class:"table-responsive"},O={class:"table align-middle mb-0"},j=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"#"),Object(o["createElementVNode"])("th",null,"Objet "),Object(o["createElementVNode"])("th",null,"Message "),Object(o["createElementVNode"])("th",null,"Date ")])],-1),p={scope:"row"},f={class:"text-truncate",style:{"max-width":"350px"}},E={class:"row"},h={class:"col-md-6 mb-3"},g=Object(o["createElementVNode"])("label",{for:""},"Nom du courrier",-1),V={key:0,class:"text-danger mt-2"},N={class:"col-md-6 mb-3"},v=Object(o["createElementVNode"])("label",{for:""},"Fichier du courrier (Facultatif)",-1),k=Object(o["createElementVNode"])("input",{type:"file",id:"file",class:"form-control"},null,-1),y={key:0,class:"text-danger mt-2"},x=Object(o["createElementVNode"])("label",{for:""},"Message du courrier",-1),B={key:0,class:"mt-3"},D=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),w=[D],C={key:1,class:"mt-3 text-center"},L=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),S=[L],T={class:"row"},I={class:"col-md-6 mb-3"},M=Object(o["createElementVNode"])("label",{for:""},"Nom du courrier",-1),A={key:0,class:"text-danger mt-2"},q={class:"col-md-6 mb-3"},U=Object(o["createElementVNode"])("label",{for:""},"Fichier du courrier (Facultatif)",-1),_=Object(o["createElementVNode"])("input",{type:"file",id:"file1",class:"form-control"},null,-1),F={key:0,class:"text-danger mt-2"},z=Object(o["createElementVNode"])("label",{for:""},"Message du courrier",-1),P={key:0,class:"mt-3"},H=Object(o["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),J=[H],G={key:1,class:"mt-3 text-center"},K=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),Q=[K],R={class:"mb-2"},W=Object(o["createTextVNode"])(" Voulez-vous vraiment supprimer le courrier "),X={key:0,class:"hstack mt-2"},Y={key:1,class:"text-center"},Z=Object(o["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),$=[Z];function ee(e,t,r,D,L,H){var K=Object(o["resolveComponent"])("PageHeader"),Z=Object(o["resolveComponent"])("b-button"),ee=Object(o["resolveComponent"])("router-link"),te=Object(o["resolveComponent"])("b-modal"),re=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(re,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(K,{title:L.title,items:L.items},null,8,["title","items"]),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(Z,{variant:"primary",onClick:t[0]||(t[0]=function(e){return D.doesAddOpen=!0}),class:"ms-auto"},{default:Object(o["withCtx"])((function(){return[n,l]})),_:1})]),Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",d,[u,m,Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("table",O,[j,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(L.courriers,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("th",p,Object(o["toDisplayString"])(t+1),1),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(ee,{to:"/courriers/"+e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.object),1)]})),_:2},1032,["to"])]),Object(o["createElementVNode"])("td",f,Object(o["toDisplayString"])(e.message),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.created_at),1)])})),128))])])])])])])]),Object(o["createVNode"])(te,{modelValue:D.doesAddOpen,"onUpdate:modelValue":t[4]||(t[4]=function(e){return D.doesAddOpen=e}),id:"modal-center",centered:"",size:"lg",title:"Ajouter un courrier","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(o["withModifiers"])((function(e){return H.addItem()}),["prevent"]))},[Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("div",h,[g,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return L.object=e}),class:"form-control"},null,512),[[o["vModelText"],L.object]]),L.errors.object?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",V,Object(o["toDisplayString"])(L.errors.object),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",N,[v,k,L.errors.file?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",y,Object(o["toDisplayString"])(L.errors.file),1)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",null,[x,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return L.message=e}),required:"",class:"form-control",rows:"4"},null,512),[[o["vModelText"],L.message]])]),L.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",C,S)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",B,w))],32)]})),_:1},8,["modelValue"]),Object(o["createVNode"])(te,{modelValue:D.doesEditOpen,"onUpdate:modelValue":t[8]||(t[8]=function(e){return D.doesEditOpen=e}),id:"modal-center",centered:"",size:"lg",title:"Modifier le courrier","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",{onSubmit:t[7]||(t[7]=Object(o["withModifiers"])((function(e){return H.editItem()}),["prevent"]))},[Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("div",I,[M,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[5]||(t[5]=function(e){return L.object=e}),class:"form-control"},null,512),[[o["vModelText"],L.object]]),L.errors.object?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",A,Object(o["toDisplayString"])(L.errors.object),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",q,[U,_,L.errors.file?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",F,Object(o["toDisplayString"])(L.errors.file),1)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",null,[z,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return L.message=e}),required:"",class:"form-control",rows:"4"},null,512),[[o["vModelText"],L.message]])]),L.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,Q)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",P,J))],32)]})),_:1},8,["modelValue"]),Object(o["createVNode"])(te,{modelValue:D.doesDeleteOpen,"onUpdate:modelValue":t[11]||(t[11]=function(e){return D.doesDeleteOpen=e}),id:"modal-center",title:"Supprimer le courrier","title-class":"font-18","hide-footer":""},{default:Object(o["withCtx"])((function(){var e;return[Object(o["createElementVNode"])("p",R,[W,Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(null===(e=L.courrier)||void 0===e?void 0:e.name),1)]),L.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Y,$)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,[Object(o["createElementVNode"])("button",{class:"btn btn-dark ms-auto",onClick:t[9]||(t[9]=function(e){return D.doesDeleteOpen=!1})},"Annuler"),Object(o["createElementVNode"])("button",{class:"ms-3 btn btn-danger",onClick:t[10]||(t[10]=function(e){return H.deleteIt()})},"Supprimer")]))]})),_:1},8,["modelValue"])]})),_:1})}r("a4d3"),r("e01a"),r("d3b7"),r("d81d"),r("4de4");var te=r("3d20"),re=r.n(te),oe=r("444f"),ce=r("c2a4"),ne=r("2579"),le=r("e01f"),ae={setup:function(){var e=Object(o["ref"])(!1),t=Object(o["ref"])(!1),r=Object(o["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:r}},page:{title:"Courriers",meta:[{name:"description",content:ce.description}]},components:{Layout:oe["a"],PageHeader:ne["a"]},data:function(){return{title:"Courriers",items:[{text:"Menu",href:"/"},{text:"Courriers",active:!0}],errors:[],courrier:{},courriers:[],object:"",message:"",loading:!1,status:201}},methods:{loadList:function(){var e=this;fetch(le["a"].route("general/courriers"),le["a"].requestOptions()).then((function(e){return le["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.courriers=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("object",this.object),t.append("message",this.message),void 0!=document.getElementById("file").files[0]&&t.append("file",document.getElementById("file").files[0]),fetch(le["a"].route("courriers"),le["a"].requestOptions("POST",t)).then((function(t){return le["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.initData(null),e.doesAddOpen=!1,e.courriers.push(t.data),re.a.fire("Courrier ajouter !","Le courrier a été enregistré avec succès.","success")):(e.errors.object=le["a"].getError(t.data,"object"),e.errors.message=le["a"].getError(t.data,"message"),e.errors.file=le["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},editItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("object",this.object),t.append("message",this.message),void 0!=document.getElementById("file1").files[0]&&t.append("file",document.getElementById("file1").files[0]),t.append("_method","PUT"),console.log(t.get("name"),"id",this.courrier.id),fetch(le["a"].route("courriers/"+this.courrier.id),le["a"].requestOptions("POST",t)).then((function(t){return le["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log("last",e.courrier),console.log("new",t),e.loading=!1,200==e.status?(e.doesEditOpen=!1,e.courriers=e.courriers.map((function(r){return r.id!==e.courrier.id?r:t.data})),re.a.fire("Courrier modifier !","Le courrier a été modifié avec succès.","success")):(e.errors.object=le["a"].getError(t.data,"object"),e.errors.message=le["a"].getError(t.data,"message"),e.errors.file=le["a"].getError(t.data,"file"))})).catch((function(t){console.log(t),e.loading=!1}))},deleteIt:function(){var e=this;this.loading=!0,fetch(le["a"].route("courriers/"+this.courrier.id),le["a"].requestOptions("DELETE")).then((function(t){return le["a"].tokenChecker(t.status),e.status=t.status,t.text()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,e.doesDeleteOpen=!1,204==e.status?(e.courriers=e.courriers.filter((function(t){return t.id!==e.courrier.id})),re.a.fire("Courrier supprimer !","Le courrier a été supprimé avec succès.","success")):re.a.fire("Courrier non supprimer ?","La suppression n'a pas marché, veuillez réssayez plus tard.","error")}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.courrier=e,this.initData(e),"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0},initData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.object=null!=e?e.object:"",this.message=null!=e?e.message:""}},mounted:function(){this.loadList()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.courrier=null,this.initData(null))},doesDeleteOpen:function(){this.doesDeleteOpen||(this.courrier=null,this.initData(null))}}},se=r("6b0d"),ie=r.n(se);const de=ie()(ae,[["render",ee]]);t["default"]=de}}]);
//# sourceMappingURL=chunk-2d0bb21d.3b8e08ae.js.map