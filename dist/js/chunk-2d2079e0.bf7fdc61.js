(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2079e0"],{a0fa:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),r={class:"hstack mb-3"},l=Object(a["createElementVNode"])("i",{class:"bx bx-plus font-size-16 align-middle me-2"},null,-1),o=Object(a["createTextVNode"])(" Ajouter un nouveau "),c={class:"row"},s={class:"col-lg-12"},d={class:"card"},i={class:"card-body"},u=Object(a["createElementVNode"])("h4",{class:"card-title"},"Listes des rapport annuels",-1),p=Object(a["createElementVNode"])("p",{class:"card-title-desc"},[Object(a["createTextVNode"])(" Le tableau ci-dessous présente la listes des "),Object(a["createElementVNode"])("code",null,"rapport annuels"),Object(a["createTextVNode"])(". ")],-1),b=Object(a["createTextVNode"])(" annual_reports "),m={class:"table-responsive"},O={class:"table align-middle mb-0"},j=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"#"),Object(a["createElementVNode"])("th",null,"Nom du rapport"),Object(a["createElementVNode"])("th",null,"Fichier"),Object(a["createElementVNode"])("th",null,"Année")])],-1),f={scope:"row"},h=["href"],E=Object(a["createElementVNode"])("i",{class:"bx bx-download font-size-16 align-middle mx-1 text-white"},null,-1),V=Object(a["createTextVNode"])(" Télécharger "),N=[E,V],v={class:"row"},g={class:"mb-3"},k=Object(a["createElementVNode"])("label",{for:""},"Nom du rapport annuel",-1),y={key:0,class:"text-danger mt-2"},x=Object(a["createElementVNode"])("label",{for:""},"Fichier du rapport annuel",-1),w=Object(a["createElementVNode"])("input",{type:"file",required:"",accept:".pdf, .docx",id:"file",class:"form-control"},null,-1),D={key:0,class:"text-danger mt-2"},_={key:0,class:"mt-3"},B=Object(a["createElementVNode"])("input",{type:"submit",value:"Enregistrer",class:"btn btn-primary"},null,-1),T=[B],A={key:1,class:"mt-3 text-center"},C=Object(a["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),L=[C];function S(e,t,n,E,V,B){var C=Object(a["resolveComponent"])("PageHeader"),S=Object(a["resolveComponent"])("b-button"),R=Object(a["resolveComponent"])("b-modal"),F=Object(a["resolveComponent"])("Layout");return Object(a["openBlock"])(),Object(a["createBlock"])(F,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,{title:V.title,items:V.items},null,8,["title","items"]),Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(S,{variant:"primary",onClick:t[0]||(t[0]=function(e){return E.doesAddOpen=!0}),class:"ms-auto"},{default:Object(a["withCtx"])((function(){return[l,o]})),_:1})]),Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",i,[u,p,b,Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("table",O,[j,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(V.annual_reports,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.id},[Object(a["createElementVNode"])("th",f,Object(a["toDisplayString"])(t+1),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.name),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("a",{href:V.STORAGE_URL+e.file,target:"_blank",class:"btn btn-primary rounded-pill"},N,8,h)]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.year),1)])})),128))])])])])])])]),Object(a["createVNode"])(R,{modelValue:E.doesAddOpen,"onUpdate:modelValue":t[3]||(t[3]=function(e){return E.doesAddOpen=e}),id:"modal-center",centered:"",title:"Ajouter un rapport annuel","title-class":"font-18","hide-footer":""},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(a["withModifiers"])((function(e){return B.addItem()}),["prevent"]))},[Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",g,[k,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return V.name=e}),class:"form-control"},null,512),[[a["vModelText"],V.name]]),V.errors.name?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",y,Object(a["toDisplayString"])(V.errors.name),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",null,[x,w,V.errors.file?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",D,Object(a["toDisplayString"])(V.errors.file),1)):Object(a["createCommentVNode"])("",!0)])]),V.loading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",A,L)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",_,T))],32)]})),_:1},8,["modelValue"])]})),_:1})}n("a4d3"),n("e01a"),n("d3b7");var R=n("3d20"),F=n.n(R),U=n("444f"),q=n("c2a4"),I=n("2579"),G=n("e01f"),M={setup:function(){var e=Object(a["ref"])(!1),t=Object(a["ref"])(!1),n=Object(a["ref"])(!1);return{doesAddOpen:e,doesEditOpen:t,doesDeleteOpen:n}},page:{title:"Tous les rapport annuels",meta:[{name:"description",content:q.description}]},components:{Layout:U["a"],PageHeader:I["a"]},data:function(){return{title:"Tous les rapport annuels",items:[{text:"Menu",href:"/"},{text:"Tous les rapport annuels",active:!0}],errors:[],annual_report:null,annual_reports:[],name:"",year:"",loading:!1,status:201,STORAGE_URL:G["a"].STORAGE_URL}},methods:{loadList:function(){var e=this;fetch(G["a"].route("sector/annual-reports"),G["a"].requestOptions()).then((function(e){return G["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.annual_reports=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("name",this.name),t.append("file",document.getElementById("file").files[0]),t.append("year",(new Date).getFullYear()),fetch(G["a"].route("annual-reports"),G["a"].requestOptions("POST",t)).then((function(t){return G["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.doesAddOpen=!1,e.initData(null),e.annual_reports.push(t.data),F.a.fire("Rapport annuel ajouter !","Le rapport annuel a été enregistré avec succès.","success")):t.data?(e.errors.name=G["a"].getError(t.data,"name"),e.errors.file=G["a"].getError(t.data,"file")):(e.doesAddOpen=!1,e.initData(null),F.a.fire("Rapport annuel non ajouter ?",t.message,"error"))})).catch((function(t){console.log(t),e.loading=!1}))},initItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.annual_report=e,this.initData(e),"delete"==t?this.doesDeleteOpen=!0:this.doesEditOpen=!0},initData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.name=null!=e?e.name:"",this.year=null!=e?e.year:""}},mounted:function(){this.loadList()},watch:{doesAddOpen:function(){this.errors=[]},doesEditOpen:function(){this.errors=[],this.doesEditOpen||(this.annual_report=null,this.initData(null))},doesDeleteOpen:function(){this.doesDeleteOpen||(this.annual_report=null,this.initData(null))}}},P=n("6b0d"),z=n.n(P);const H=z()(M,[["render",S]]);t["default"]=H}}]);
//# sourceMappingURL=chunk-2d2079e0.bf7fdc61.js.map