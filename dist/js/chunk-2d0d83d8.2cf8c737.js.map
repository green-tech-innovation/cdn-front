{"version":3,"sources":["webpack:///./src/router/views/pages/general/surveys/show.vue","webpack:///./src/router/views/pages/general/surveys/show.vue?dce4"],"names":["class","scope","for","type","value","role","title","items","survey_vote","id","survey","can_vote","variant","doesAddOpen","name","date","description","survey_items","survey_item","i","key","item","survey_votes","length","centered","title-class","hide-footer","sendResponse","survey_item_id","errors","loading","setup","doesEditOpen","doesDeleteOpen","page","meta","content","components","Layout","PageHeader","data","text","href","active","loadingPublish","status","methods","getItem","fetch","route","this","requestOptions","then","response","tokenChecker","json","console","log","formData","FormData","append","fire","getError","catch","error","mounted","$route","params","__exports__","render"],"mappings":"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","file":"js/chunk-2d0d83d8.2cf8c737.js","sourcesContent":["<script>\r\nimport Swal from 'sweetalert2'\r\n\r\nimport Layout from \"../../../../layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport Helper from '@/helpers/helper';\r\n\r\nimport { ref } from \"vue\";\r\n\r\n\r\n/**\r\n * Dashboard Component\r\n */\r\nexport default {\r\n    setup() {\r\n        const doesAddOpen = ref(false);\r\n        const doesEditOpen = ref(false);\r\n        const doesDeleteOpen = ref(false);\r\n\r\n        return {\r\n            doesAddOpen,\r\n            doesEditOpen,\r\n            doesDeleteOpen,\r\n        };\r\n    },\r\n    page: {\r\n    title: \"Sondages\",\r\n    meta: [\r\n      {\r\n        name: \"description\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Sondages\",\r\n      items: [\r\n        {\r\n          text: \"Menu\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Sondages\",\r\n          active: true,\r\n        },\r\n        {\r\n          text: \"Un Sondage\",\r\n          active: true,\r\n        },\r\n      ],\r\n      id: \"\",\r\n      item: \"\",\r\n      errors: [],\r\n      survey: {},\r\n      survey_item_id: \"\",\r\n      survey_vote: {},\r\n      loading: false,\r\n      loadingPublish: false,\r\n      status: 201,\r\n    };\r\n  },\r\n  methods: {\r\n    getItem() {\r\n      fetch(Helper.route('general/surveys/'+this.id), Helper.requestOptions())\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log('survey', data.data);\r\n        this.survey = data.data.survey\r\n        this.survey_vote = data.data.survey_vote\r\n      })\r\n    },\r\n    sendResponse() {\r\n      this.loading = true\r\n      this.errors = []\r\n      let formData = new FormData()\r\n      formData.append(\"survey_item_id\", this.survey_item_id)\r\n      fetch(Helper.route('survey-votes'), Helper.requestOptions(\"POST\", formData))\r\n      .then(response => {\r\n          Helper.tokenChecker(response.status)\r\n          this.status = response.status\r\n          return response.json()\r\n      })\r\n      .then(data => {\r\n        console.log(this.status);\r\n        console.log(data);\r\n        this.loading = false\r\n        if (this.status == 200) {\r\n          this.survey_item_id = \"\"\r\n          this.doesAddOpen = false\r\n          this.survey_vote = data.data.survey_vote\r\n          this.survey = data.data.survey\r\n          Swal.fire(\"Reponse envoyé !\", \"Votre choix a été envoyé avec succès.\", \"success\");\r\n        } else {\r\n          this.errors.survey_item_id = Helper.getError(data.data, \"survey_item_id\")\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.loading = false\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.params.id\r\n    this.getItem()\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n\r\n    <div class=\"hstack mb-3\" v-if=\"!survey_vote.id && survey.can_vote\">\r\n        <b-button variant=\"success\" @click=\"doesAddOpen = true\" class=\"ms-auto\">\r\n            <i class=\"bx bx-send font-size-16 align-middle me-2\"></i>\r\n            Envoyer votre choix\r\n        </b-button>\r\n    </div>\r\n    \r\n    \r\n    <div class=\"row\" v-if=\"survey != {}\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title\">{{ survey.name }}</h4>\r\n            <p class=\"text-danger mb-2\">\r\n                Date de Fin : {{ survey.date }}\r\n            </p>\r\n            <p class=\"card-title-desc\">\r\n              {{ survey.description }}\r\n            </p>\r\n            \r\n            <div class=\"bg-light p-3 pt-3\">\r\n                <h6 class=\"font-20 text-danger\">♣ Listes des options</h6>\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table align-middle mb-0\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Option</th>\r\n                                <th class=\"text-center\" v-if=\"survey_vote.id\">Nombre de vote</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr v-for=\"(survey_item, i) in survey.survey_items\" :key=\"survey_item.id\">\r\n                                <th scope=\"row\">{{ i + 1 }}</th>\r\n                                <td>\r\n                                  {{ survey_item.item }}\r\n                                </td>\r\n                                <td class=\"text-center\" v-if=\"survey_vote.id\">{{ survey_item.survey_votes.length }}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ADD MODAL -->\r\n    <b-modal\r\n        v-model=\"doesAddOpen\"\r\n        id=\"modal-center\"\r\n        centered\r\n        title=\"Envoyez votre choix\"\r\n        title-class=\"font-18\"\r\n        hide-footer\r\n        >\r\n        <form @submit.prevent=\"sendResponse()\">\r\n          <div>\r\n            <label for=\"\">Votre choix</label>\r\n            <select v-model=\"survey_item_id\" class=\"form-control\">\r\n              <option :value=\"survey_item.id\" v-for=\"survey_item in survey.survey_items\" :key=\"survey_item.id\">{{ survey_item.item }}</option>\r\n            </select>\r\n            <span class=\"text-danger mt-2\" v-if=\"errors.survey_item_id\">{{ errors.survey_item_id }}</span>\r\n          </div>\r\n          <div class=\"mt-3\" v-if=\"!loading\">\r\n            <input type=\"submit\" value=\"Enregistrer\" class=\"btn btn-primary\">\r\n          </div>\r\n          <div class=\"mt-3 text-center\" v-else>\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n\r\n  </Layout>\r\n</template>\r\n","import { render } from \"./show.vue?vue&type=template&id=2bb643bb\"\nimport script from \"./show.vue?vue&type=script&lang=js\"\nexport * from \"./show.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\Projets\\\\VueJs\\\\cdn\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}