(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237b05"],{fbd7:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("a4d3"),c("e01a");var a=c("7a23"),n={key:0,class:"hstack mb-3"},o={class:"ms-auto"},l={key:0,class:"hstack"},r=Object(a["createElementVNode"])("i",{class:"bx bx-window-close font-size-16 align-middle me-2"},null,-1),i=Object(a["createTextVNode"])(" Refuser le rapport "),s=Object(a["createElementVNode"])("i",{class:"bx bx-check-double font-size-16 align-middle me-2"},null,-1),d=Object(a["createTextVNode"])(" Accepter le rapport "),b={key:1,class:"text-center"},u=Object(a["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),m=[u],O={key:1,class:"hstack mb-4"},j={class:"ms-auto"},p={key:1,class:"text-center"},v=Object(a["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),V=[v],N={key:2,class:"row"},h={class:"col-lg-12"},E={class:"card"},g={class:"card-body"},y={class:"card-title text-primary mb-3"},f=Object(a["createElementVNode"])("b",null,"Fichier du projet",-1),k=Object(a["createTextVNode"])(" : "),x=["href"],S=Object(a["createElementVNode"])("i",{class:"bx bx-download font-size-14 align-middle mx-1 text-white"},null,-1),C=Object(a["createTextVNode"])(" Télécharger le Fichier "),B=[S,C],w=Object(a["createElementVNode"])("b",null,"Progression",-1),_=Object(a["createElementVNode"])("b",null,"Montant alloué",-1),T=Object(a["createElementVNode"])("b",null,"Date debut",-1),D=Object(a["createElementVNode"])("b",null,"Date Fin",-1),R=Object(a["createElementVNode"])("h6",null,[Object(a["createElementVNode"])("b",null,"Description")],-1),A={class:"card-title-desc"},L={key:0,class:"bg-light p-2 mt-3 mb-0 pt-3"},P=Object(a["createElementVNode"])("b",null,"Rapport",-1),F=Object(a["createTextVNode"])(" : "),M=Object(a["createElementVNode"])("br",null,null,-1),z=["href"],U=Object(a["createElementVNode"])("i",{class:"bx bx-download font-size-14 align-middle mx-1 text-white"},null,-1),q=Object(a["createTextVNode"])(" Télécharger le Fichier "),I=[U,q],G=Object(a["createElementVNode"])("b",null,"Date d'envoie",-1),H=Object(a["createTextVNode"])(" : "),J=Object(a["createElementVNode"])("br",null,null,-1),$={key:1,class:"bg-light border shadow p-2 mt-3 mb-0 pt-3"},K=Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("b",null,"Statut du rapport"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("br"),Object(a["createElementVNode"])("span",{class:"text-danger"},"Réjété")],-1),Q=Object(a["createElementVNode"])("b",null,"Message de rejet",-1),W=Object(a["createTextVNode"])(" : "),X=Object(a["createElementVNode"])("br",null,null,-1),Y={key:2,class:"bg-light border shadow p-2 mt-3 mb-0 pt-3"},Z=Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("b",null,"Statut du rapport"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("br"),Object(a["createElementVNode"])("span",{class:"text-success"},"Accepté")],-1),ee=Object(a["createElementVNode"])("b",null,"Date d'approbation",-1),te=Object(a["createTextVNode"])(" : "),ce=Object(a["createElementVNode"])("br",null,null,-1),ae={class:"bg-light p-3 pt-3 mt-3"},ne=Object(a["createElementVNode"])("h6",{class:"font-20 text-danger"},"♣ Listes des sous-activités",-1),oe={class:"table-responsive"},le={class:"table align-middle mb-0"},re=Object(a["createElementVNode"])("th",null,"#",-1),ie=Object(a["createElementVNode"])("th",null,"Activité",-1),se=Object(a["createElementVNode"])("th",{class:"text-center"},"Progession",-1),de=Object(a["createElementVNode"])("th",{class:"text-center"},"Poids",-1),be=Object(a["createElementVNode"])("th",{class:"text-center"},"Montant alloué",-1),ue={key:0},me={scope:"row"},Oe={class:"text-center"},je={class:"text-center"},pe={class:"text-center text-black"},ve={key:0,class:"hstack"},Ve=Object(a["createElementVNode"])("i",{class:"bx bx-edit font-size-16 align-middle mx-1"},null,-1),Ne=Object(a["createElementVNode"])("i",{class:"bx bx-trash font-size-16 align-middle mx-1"},null,-1),he={class:"mb-3"},Ee=Object(a["createElementVNode"])("label",{for:""},"Message de rejet",-1),ge={key:0,class:"mt-3"},ye=Object(a["createElementVNode"])("input",{type:"submit",value:"Envoyer",class:"btn btn-primary"},null,-1),fe=[ye],ke={key:1,class:"mt-3 text-center"},xe=Object(a["createElementVNode"])("div",{class:"spinner-border text-primary",role:"status"},[Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),Se=[xe];function Ce(e,t,c,u,v,S){var C=Object(a["resolveComponent"])("PageHeader"),U=Object(a["resolveComponent"])("b-button"),q=Object(a["resolveComponent"])("b-progress"),ye=Object(a["resolveComponent"])("router-link"),xe=Object(a["resolveComponent"])("b-modal"),Ce=Object(a["resolveComponent"])("Layout");return Object(a["openBlock"])(),Object(a["createBlock"])(Ce,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,{title:v.title,items:v.items},null,8,["title","items"]),0==v.activity.approved&&90==v.activity.progress&&v.activity.report?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createElementVNode"])("div",o,[v.loadingSetStatut?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,m)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[Object(a["createVNode"])(U,{variant:"danger",onClick:t[0]||(t[0]=function(e){return u.doesAddOpen=!0})},{default:Object(a["withCtx"])((function(){return[r,i]})),_:1}),Object(a["createVNode"])(U,{variant:"success",class:"ms-3",onClick:t[1]||(t[1]=function(e){return S.setStatus(1)})},{default:Object(a["withCtx"])((function(){return[s,d]})),_:1})]))])])):Object(a["createCommentVNode"])("",!0),1==v.activity.approved?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,[Object(a["createElementVNode"])("div",j,[v.loadingReportPublic?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,V)):(Object(a["openBlock"])(),Object(a["createBlock"])(U,{key:0,variant:0==v.activity.report_public?"success":"danger",class:"ms-3",onClick:t[2]||(t[2]=function(e){return S.publishReport()})},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["bx font-size-16 align-middle me-2",0==v.activity.report_public?"bx-check-double":"bx-window-close"])},null,2),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(0==v.activity.report_public?"Marquer le rapport de l'activité comme public":"Marquer le rapport de l'activité comme privé"),1)]})),_:1},8,["variant"]))])])):Object(a["createCommentVNode"])("",!0),v.activity.id?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",N,[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("h4",y,Object(a["toDisplayString"])(v.activity.name),1),Object(a["createElementVNode"])("p",null,[f,k,v.activity.file?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:0,href:v.STORAGE_URL+v.activity.file,target:"_blank",class:"btn btn-sm btn-success rounded-pill"},B,8,x)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("p",null,[w,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(v.activity.progress)+"% ",1),Object(a["createVNode"])(q,{value:v.activity.progress,max:100,class:"mt-2",variant:"success"},null,8,["value"])]),Object(a["createElementVNode"])("p",null,[_,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(v.activity.amount)+" F CFA",1)]),Object(a["createElementVNode"])("p",null,[T,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(v.activity.date_start),1)]),Object(a["createElementVNode"])("p",null,[D,Object(a["createTextVNode"])(" : "+Object(a["toDisplayString"])(v.activity.date_end),1)]),R,Object(a["createElementVNode"])("p",A,Object(a["toDisplayString"])(v.activity.description),1),v.activity.report?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[Object(a["createElementVNode"])("p",null,[P,F,M,Object(a["createElementVNode"])("a",{href:v.STORAGE_URL+v.activity.report,target:"_blank",class:"btn btn-sm btn-success rounded-pill"},I,8,z)]),Object(a["createElementVNode"])("p",null,[G,H,J,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(v.activity.date_report),1)])])):Object(a["createCommentVNode"])("",!0),-1==v.activity.approved?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",$,[K,Object(a["createElementVNode"])("p",null,[Q,W,X,Object(a["createTextVNode"])(Object(a["toDisplayString"])(v.activity.message),1)])])):Object(a["createCommentVNode"])("",!0),1==v.activity.approved?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Y,[Z,Object(a["createElementVNode"])("p",null,[ee,te,ce,Object(a["createTextVNode"])(Object(a["toDisplayString"])(v.activity.date_approved),1)])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",ae,[ne,Object(a["createElementVNode"])("div",oe,[Object(a["createElementVNode"])("table",le,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[re,ie,se,de,be,0==v.activity.sub_activity_is_add?(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",ue,"Action")):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(v.activity.sub_activities,(function(t,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("th",me,Object(a["toDisplayString"])(c+1),1),Object(a["createElementVNode"])("td",null,[Object(a["createVNode"])(ye,{to:"/cdn/sub-activities/"+t.id},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.name),1)]})),_:2},1032,["to"])]),Object(a["createElementVNode"])("td",Oe,Object(a["toDisplayString"])(t.progress)+" %",1),Object(a["createElementVNode"])("td",je,Object(a["toDisplayString"])(t.weight),1),Object(a["createElementVNode"])("td",pe,Object(a["toDisplayString"])(t.amount)+" F",1),0==v.activity.sub_activity_is_add?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",ve,[Object(a["createVNode"])(U,{class:"btn-sm",onClick:function(c){return e.initItem(t)},variant:"success"},{default:Object(a["withCtx"])((function(){return[Ve]})),_:2},1032,["onClick"]),Object(a["createVNode"])(U,{variant:"danger",onClick:function(c){return e.initItem(t,"delete")},class:"ms-2 btn-sm"},{default:Object(a["withCtx"])((function(){return[Ne]})),_:2},1032,["onClick"])])):Object(a["createCommentVNode"])("",!0)])})),128))])])])])])])])])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(xe,{modelValue:u.doesAddOpen,"onUpdate:modelValue":t[5]||(t[5]=function(e){return u.doesAddOpen=e}),id:"modal-center",centered:"",title:"Refuser le rapport","title-class":"font-18","hide-footer":""},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("form",{onSubmit:t[4]||(t[4]=Object(a["withModifiers"])((function(e){return S.setStatus(-1)}),["prevent"]))},[Object(a["createElementVNode"])("div",he,[Ee,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.message=t}),class:"form-control",rows:"3"},null,512),[[a["vModelText"],e.message]])]),v.loading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ke,Se)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ge,fe))],32)]})),_:1},8,["modelValue"])]})),_:1})}c("d3b7");var Be=c("3d20"),we=c.n(Be),_e=c("444f"),Te=c("c2a4"),De=c("2579"),Re=c("e01f"),Ae={setup:function(){var e=Object(a["ref"])(!1),t=Object(a["ref"])(!1);return{doesAddOpen:e,doesAddOpen1:t}},page:{title:"Categories",meta:[{name:"description",content:Te.description}]},components:{Layout:_e["a"],PageHeader:De["a"]},data:function(){return{title:"Une activité",items:[{text:"Menu",href:"/"},{text:"Projet",active:!0},{text:"Activités",active:!0},{text:"Une activité",active:!0}],errors:[],id:"",name:"",description:"",weight:1,amount:"",date_start:"",date_end:"",activity:{},sub_activity:{},loading:!1,loadingSetStatut:!1,loadingReportPublic:!1,status:201,STORAGE_URL:Re["a"].STORAGE_URL}},methods:{getItem:function(){var e=this;fetch(Re["a"].route("activities/"+this.id),Re["a"].requestOptions()).then((function(e){return Re["a"].tokenChecker(e.status),e.json()})).then((function(t){console.log(t.data),e.activity=t.data}))},setStatus:function(e){var t=this;-1==e?this.loading=!0:(this.loadingSetStatut=!0,this.message=""),this.errors=[];var c=new FormData;c.append("approved",e),c.append("message",this.message),fetch(Re["a"].route("activities/"+this.id+"/status"),Re["a"].requestOptions("POST",c)).then((function(e){return Re["a"].tokenChecker(e.status),t.status=e.status,e.json()})).then((function(c){console.log(t.status),console.log(c),t.message="",t.doesAddOpen=!1,0==e?t.loading=!1:t.loadingSetStatut=!1,200==t.status&&(t.activity=c.data,we.a.fire("Rapport envoyé !","Le rapport a été envoyé avec succès.","success"))})).catch((function(c){console.log(c),0==e?t.loading=!1:t.loadingSetStatut=!1}))},publishReport:function(){var e=this;this.loadingReportPublic=!0,fetch(Re["a"].route("sector/activities/"+this.id+"/report-publish"),Re["a"].requestOptions()).then((function(e){return Re["a"].tokenChecker(e.status),e.json()})).then((function(t){e.loadingReportPublic=!1,console.log(t),e.activity=t.data}))},addItem:function(){var e=this;this.loading=!0,this.errors=[];var t=new FormData;t.append("activity_id",this.id),t.append("name",this.name),fetch(Re["a"].route("activities/"+this.id+"/status"),Re["a"].requestOptions("POST",t)).then((function(t){return Re["a"].tokenChecker(t.status),e.status=t.status,t.json()})).then((function(t){console.log(e.status),console.log(t),e.loading=!1,200==e.status?(e.doesAddOpen=!1,e.initData(null),e.activity=t.data,we.a.fire("Sous activité ajouter !","Le sous-activité a été enregistré avec succès.","success")):(e.errors.name=Re["a"].getError(t.data,"name"),e.errors.description=Re["a"].getError(t.data,"description"))})).catch((function(t){console.log(t),e.loading=!1}))}},mounted:function(){this.id=this.$route.params.id,this.getItem()},watch:{doesAddOpen:function(){this.errors=[]}}},Le=c("6b0d"),Pe=c.n(Le);const Fe=Pe()(Ae,[["render",Ce]]);t["default"]=Fe}}]);
//# sourceMappingURL=chunk-2d237b05.d2b3b884.js.map